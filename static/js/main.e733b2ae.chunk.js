/*! For license information please see main.e733b2ae.chunk.js.LICENSE.txt */
(this["webpackJsonplunch-wpa"]=this["webpackJsonplunch-wpa"]||[]).push([[0],{159:function(e,t,n){},206:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(20),s=n.n(r),i=(n(159),n(160),n(18)),o=n(28),l=n(10),j=n(11),d=n(13),h=n(12),u=n(127),b=n(33),p=n(1),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e={url:b.docRoot+"status.json"};return Object(p.jsx)(u.Offline,{polling:e,children:Object(p.jsx)("p",{style:{textAlign:"center"},className:"p-3 mb-2 bg-danger text-white",children:"\u96e2\u7dda\u4e2d\uff0c\u8acb\u6aa2\u5bdf\u60a8\u7684\u9023\u7dda\u72c0\u6cc1"})})}}]),n}(a.a.Component),m=n(60),x=n(261),f=n(262),v=n(256),g=n(16),y=n(257),w=n(242),k=n(70),S=n.n(k),T=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;Object(l.a)(this,n),c=t.call(this,e);var a=(new g.a).getAll(),r=[];return a.isGoogle?r.push(!0):r.push(!1),a.isSells?r.push(!0):r.push(!1),a.session?r.push(!0):r.push(!1),c.state={isGoogle:r[0],isSells:r[1],isLoggedIn:r[2],username:a.userName||"Anonymous",searchTerm:""},c.handleSearchTermChange=c.handleSearchTermChange.bind(Object(m.a)(c)),c.searchProduct=c.searchProduct.bind(Object(m.a)(c)),c}return Object(j.a)(n,[{key:"searchProduct",value:function(){this.props.location.pathname.indexOf("query")>-1?(this.props.history.replace("/query?q="+this.state.searchTerm),this.props.history.go(0)):this.props.history.push("/query?q="+this.state.searchTerm)}},{key:"handleSearchTermChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){var e="\u55e8! "+this.state.username;return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsxs)(x.a,{bg:"light",expand:"lg",children:[Object(p.jsx)(x.a.Brand,{href:"/",children:"\u7f8e\u5ee3\u8a02\u9910\u7cfb\u7d71"}),Object(p.jsx)(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsxs)(x.a.Collapse,{id:"basic-navbar-nav",children:[Object(p.jsxs)(f.a,{className:"mr-auto",children:[Object(p.jsx)(f.a.Link,{href:"#/restaurant",children:"\u9910\u5ef3"}),this.state.isSells&&Object(p.jsxs)(v.a,{title:"\u5546\u5bb6\u7ba1\u7406",id:"basic-nav-dropdown",children:[Object(p.jsx)(v.a.Item,{href:"#/config/menu",children:"\u83dc\u55ae\u8a2d\u5b9a"}),Object(p.jsx)(v.a.Item,{as:i.b,to:"/service",children:"\u5ba2\u670d\u670d\u52d9"}),Object(p.jsx)(v.a.Item,{as:i.b,to:"/booked",children:"\u51fa\u9910"})]}),Object(p.jsxs)(v.a,{title:"\u76f8\u95dc\u9023\u7d50",id:"basic-nav-dropdown",children:[Object(p.jsx)(v.a.Item,{href:"https://sites.google.com/view/tnfshsu/",rel:"noreferrer noopener",target:"_blank",children:"\u5b78\u806f\u6703"}),Object(p.jsx)(v.a.Item,{href:"https://tnfsacec.github.io",rel:"noreferrer noopener",target:"_blank",children:"\u9078\u59d4\u6703"})]}),Object(p.jsx)(y.a,{value:this.state.searchTerm,onChange:this.handleSearchTermChange,id:"term",label:"\u641c\u5c0b\u60f3\u5403\u7684",variant:"outlined",size:"small",InputProps:{endAdornment:Object(p.jsx)(w.a,{onClick:this.searchProduct,children:Object(p.jsx)(S.a,{})})}})]}),this.state.isLoggedIn?Object(p.jsxs)(v.a,{title:e,id:"basic-nav-dropdown",children:[Object(p.jsx)(v.a.Item,{href:"#/history",children:"\u6b77\u53f2\u7d00\u9304"}),Object(p.jsx)(v.a.Item,{href:"#/settings",children:"\u8a2d\u5b9a"}),Object(p.jsx)(v.a.Item,{onClick:function(){var e=new g.a;e.remove("id"),e.remove("isGoogle"),e.remove("isSells"),e.remove("session"),e.remove("userName"),e.remove("storeId"),e.remove("name"),e.set("alert","\u767b\u51fa\u6210\u529f",{path:"/"}),window.location.href="/"},children:"\u767b\u51fa"})]}):Object(p.jsxs)(f.a,{children:[Object(p.jsx)(f.a.Link,{href:"#/signup",children:"\u8a3b\u518a"}),Object(p.jsx)(f.a.Link,{href:"#/login",children:"\u767b\u5165"})]})]})]})})}}]),n}(a.a.Component),N=Object(o.h)(T),I=n(15);function C(e){var t=new g.a,n=t.getAll(),r=Object(c.useState)(!1),s=Object(I.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(),j=Object(I.a)(l,2),d=j[0],h=j[1];return window.addEventListener("hashchange",(function(){void 0!==n.alert?(h(n.alert),o(!0),t.remove("alert")):o(!1)})),Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)("p",{className:"p-3 mb-2 bg-success text-white",hidden:!i,children:d})})}var A=n(243),E=n(244),P=n(134),_=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"p-3 mb-2 bg-dark text-white ",children:Object(p.jsxs)(A.a,{children:[Object(p.jsx)("br",{}),Object(p.jsxs)(E.a,{children:[Object(p.jsxs)(P.a,{children:[Object(p.jsx)(i.b,{to:"/privacy",children:"\u96b1\u79c1\u6b0a\u8072\u660e"}),Object(p.jsx)("br",{}),Object(p.jsx)(i.b,{to:"/COC",children:"\u884c\u70ba\u6e96\u5247"}),Object(p.jsx)("br",{}),Object(p.jsx)(i.b,{to:"/feedback",children:"\u610f\u898b\u53cd\u994b"})]}),Object(p.jsxs)(P.a,{children:["\u95dc\u65bc\u6211\u5011\uff1a",Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:"https://sivir.pw",rel:"noreferrer noopener",target:"_blank",children:"Milliax"}),"\u3001",Object(p.jsx)("a",{href:"https://hsuan.app/",rel:"noreferrer noopener",target:"_blank",children:"Hsuan1117"}),"\u3001",Object(p.jsx)("a",{href:"https://neodoggy.github.io/",rel:"noreferrer noopener",target:"_blank",children:"Neodoggy"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsxs)("span",{children:["version: ",b.version]})]})]})]})})]})}}]),n}(a.a.Component),F=n(58),B=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(F.a,{children:[Object(p.jsxs)(F.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"First slide"}),Object(p.jsxs)(F.a.Caption,{children:[Object(p.jsx)("h3",{children:"First slide label"}),Object(p.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]}),Object(p.jsxs)(F.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"Second slide"}),Object(p.jsxs)(F.a.Caption,{children:[Object(p.jsx)("h3",{children:"Second slide label"}),Object(p.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]}),Object(p.jsxs)(F.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"Third slide"}),Object(p.jsxs)(F.a.Caption,{children:[Object(p.jsx)("h3",{children:"Third slide label"}),Object(p.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]})]})}}]),n}(a.a.Component),q=n(24),R=n.n(q),D=n(31),L=n(265),z=n(245),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");M?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):G(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):G(t,e)}))}}function G(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function U(){var e=Object(c.useState)(!1),t=Object(I.a)(e,2),n=t[0],a=t[1];function r(){return s.apply(this,arguments)}function s(){return(s=Object(D.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({});case 2:a(!1),window.location.reload(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){J({onUpdate:function(e){window.alert("\u767c\u73fe\u65b0\u7248\u672c\uff01\uff01\uff01 \u9ede\u6b64\u7acb\u5373\u66f4\u65b0"),e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}})}),[]),Object(p.jsx)(L.a,{open:n,message:"A new version is available!",onClick:r,anchorOrigin:{vertical:"top",horizontal:"center"},action:Object(p.jsx)(z.a,{color:"inherit",size:"small",onClick:r,children:"Reload"})})}var H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsxs)(A.a,{children:[Object(p.jsx)(U,{}),Object(p.jsx)(B,{})]})})}}]),n}(a.a.Component),W=n(246),Z=n(135),K=n.n(Z),V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=b.googleCloudPlatformId+".apps.googleusercontent.com",t=function(e){console.log(JSON.stringify(e));var t={token:e.accessToken};fetch("https://lunchapi.hsuan.app/api/google",{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(t){var n;if(void 0!==e.profileObj.givenName){var c=new g.a;c.set("session",t.access_token,{path:"/"}),c.set("isGoogle","true",{path:"/"}),c.set("alert","\u767b\u5165\u6210\u529f",{path:"/"}),c.set("userName",null===e||void 0===e||null===(n=e.profileObj)||void 0===n?void 0:n.givenName,{path:"/"}),window.location.replace("/")}})).catch((function(e){console.log("Failed: ".concat(e))}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(K.a,{clientId:e,buttonText:"\u4f7f\u7528 Google \u767b\u5165",onSuccess:t,onFailure:t,hostedDomain:b.gmailSuffix,cookiePolicy:"single_host_origin"})})}}]),n}(a.a.Component),Q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={loading:!1},c}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){var e=this;return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)(A.a,{children:Object(p.jsxs)("form",{className:"signInBlock",children:[Object(p.jsx)("h3",{style:{textAlign:"center"},className:"p-2",children:"\u767b\u5165"}),Object(p.jsx)("center",{hidden:!this.state.loading,children:Object(p.jsx)(W.a,{animation:"border"})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u96fb\u5b50\u90f5\u4ef6"}),Object(p.jsx)("input",{id:"userInputEmail",type:"email",className:"form-control",placeholder:"Enter email"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u5bc6\u78bc"}),Object(p.jsx)("input",{id:"userInputPasswd",type:"password",className:"form-control",placeholder:"Enter password"})]}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(P.a,{}),Object(p.jsx)(P.a,{}),Object(p.jsx)(P.a,{children:Object(p.jsx)(i.b,{className:"btn btn-primary btn-block",onClick:function(){var t=document.getElementById("userInputEmail"),n=document.getElementById("userInputPasswd");if(-1!==t.value.search(/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/)){var c={email:t.value,password:n.value};e.setState({loading:!0}),fetch("https://lunchapi.hsuan.app/api/login",{method:"POST",body:JSON.stringify(c),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){var t=new g.a;return t.set("session",e.access_token,{path:"/"}),t.set("alert","\u767b\u5165\u6210\u529f",{path:"/"}),e})).catch((function(e){console.log("Failed: ".concat(e))})).then((function(t){fetch("https://lunchapi.hsuan.app/api/me",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.access_token)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(t){var n=new g.a;n.set("userName",t.name,{path:"/"}),n.set("id",t.id,{path:"/"}),n.set("isSells",!0,{path:"/"}),void 0!==t.stores[0]&&n.set("storeId",t.stores[0].id,{path:"/"}),e.setState({loading:!1}),document.location.replace("/")}))}))}},children:"Submit"})})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("label",{children:"\u5176\u4ed6\u767b\u5165\u65b9\u5f0f\uff1f"}),Object(p.jsx)("div",{className:"otherLoginMethod",children:Object(p.jsx)(V,{})})]})})})}}]),n}(a.a.Component),$=n(263),Y=n(130),X=n(36),ee=n.n(X),te=n(238);function ne(e){var t=Object(c.useState)(""),n=Object(I.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),l=Object(I.a)(i,2),j=l[0],d=l[1],h=Object(c.useState)(""),u=Object(I.a)(h,2),b=u[0],O=u[1],m=Object(c.useState)(""),x=Object(I.a)(m,2),f=x[0],v=x[1],y=Object(c.useState)(""),w=Object(I.a)(y,2),k=w[0],S=w[1],T=Object(o.f)(),N="https://lunchapi.hsuan.app/api/stores/"+e.store+"/products/"+e.product;function C(){return(C=Object(D.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(N,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){O(e.price),v(e.description),s(e.name),d(e.image)})).catch((function(e){var t=JSON.parse(e.message);ee.a.fire({title:"\u932f\u8aa4!",text:"".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"),icon:"error",confirmButtonText:"Ok"}).then((function(){return T.push("/")}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=(new g.a).getAll();return Object(c.useEffect)((function(){!function(){C.apply(this,arguments)}()})),Object(p.jsx)(a.a.Fragment,{children:Object(p.jsxs)(A.a,{children:[Object(p.jsx)("br",{}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(P.a,{children:Object(p.jsxs)($.a,{children:[Object(p.jsx)($.a.Caption,{className:"text-center",children:Object(p.jsxs)("h1",{children:["\u9910\u9ede\uff1a",r]})}),Object(p.jsx)($.a.Image,{width:300,alt:"\u9910\u9ede\u7684\u7167\u7247",src:"https://lunchapi.hsuan.app/"+j,resizeMode:"contain"})]})}),Object(p.jsxs)(P.a,{children:["\u63cf\u8ff0\uff1a",f]})]}),Object(p.jsx)(E.a,{children:Object(p.jsx)(P.a,{children:Object(p.jsxs)("h5",{children:["\u5efa\u8b70\u552e\u50f9\uff1a",b]})})}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(P.a,{lg:10,children:Object(p.jsx)(te.a,{className:"form-control",placeholder:"\u7559\u8a00",rows:"5",onChange:function(e){return S(e.target.value)},value:k})}),Object(p.jsxs)(P.a,{lg:3,children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{style:{display:"flex"},children:Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(Y.a,{variant:"primary",onClick:function(){var t="\u8acb\u78ba\u8a8d\u60a8\u7684\u8a02\u8cfc\u8cc7\u8a0a\n\u540d\u7a31\uff1a".concat(r,"\n\u552e\u50f9\uff1a").concat(b,"\n\u5176\u4ed6\u5efa\u8b70\uff1a").concat(k,"\n\u6309 OK \u9001\u51fa\uff1bcancel \u53d6\u6d88");if(window.confirm(t)){fetch("https://lunchapi.hsuan.app/api/transactions",{method:"POST",body:JSON.stringify({name:r,qty:1,store_id:e.store,product_id:e.product,comment:k,options:{}}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(_.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){ee.a.fire({title:"\u8a02\u8cfc\u6210\u529f!",html:"\u611f\u8b1d\u60a8\u5229\u7528\u672c\u7cfb\u7d71\u8a02\u8cfc\u7522\u54c1<br>\u8acb\u8a18\u5f97\u65bc\u9078\u53d6\u6642\u9593\u53d6\u9910\uff0c\u8b1d\u8b1d<br>"+"\u60a8\u7684\u4ea4\u6613ID\u70ba\uff1a <b>".concat(e.id,"</b>"),icon:"success",confirmButtonText:"Ok"}).then((function(){return T.push("/")}))})).catch((function(e){console.log(e);var t=JSON.parse(e.message);ee.a.fire({title:"\u932f\u8aa4!",text:"".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"),icon:"error",confirmButtonText:"Ok"}).then((function(){return T.push("/")}))}))}else ee.a.fire({title:"\u932f\u8aa4!",text:"\u8a02\u55ae\u672a\u6210\u7acb",icon:"error",confirmButtonText:"Ok"}).then()},children:"\u8a02\u8cfc"})})})]})]})]})})}var ce=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u8a02\u9910"}),Object(p.jsx)(ne,{store:this.props.match.params.store,product:this.props.match.params.product})]})}}]),n}(a.a.Component),ae=n(264);var re=function(e){var t=Object(c.useState)([]),n=Object(I.a)(t,2),r=n[0],s=n[1],l=Object(c.useState)(!1),j=Object(I.a)(l,2),d=j[0],h=j[1],u=Object(o.f)(),b=Object(c.useRef)(!0),O=Object(c.useState)(!1),m=Object(I.a)(O,2),x=m[0],f=m[1],v=(new g.a).getAll();function y(){return(y=Object(D.a)(R.a.mark((function t(){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h(!0),n="https://lunchapi.hsuan.app/api/stores/"+e.storeId+"/products",fetch(n,{method:"GET"}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),u.push("/login")})).then((function(t){console.log(t);for(var n=0;n<t.length;++n)t[n].storeId=e.storeId;s(t),h(!1),void 0!==v.session&&f(!0)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){b.current&&(b.current=!1,function(){y.apply(this,arguments)}())})),Object(p.jsxs)("div",{className:"ListStore",children:[Object(p.jsx)("center",{children:Object(p.jsx)(W.a,{animation:"border",hidden:!d})}),r&&(r.length>0?r.map((function(e){return Object(p.jsxs)(ae.a,{children:[Object(p.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(ae.a.Title,{children:e.name}),Object(p.jsx)(ae.a.Text,{children:e.description})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(Y.a,{variant:"primary",as:i.b,hidden:!x,to:{pathname:"/purchase/".concat(e.storeId,"/").concat(e.id)},children:"\u7acb\u5373\u8a02\u8cfc"})})]})]},e.id)})):Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("h2",{style:{textAlign:"center"},children:"\u67e5\u7121\u8cc7\u6599"})]}))]})},se=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"}),console.log(this.props.match.params)}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u5403\u4ec0\u9ebc"}),Object(p.jsx)(A.a,{children:Object(p.jsx)(re,{storeId:this.props.match.params.storeId})})]})}}]),n}(a.a.Component),ie=n(71),oe=n.n(ie);function le(e,t){console.log("[".concat(e.toUpperCase(),"] ").concat(t,'"'))}var je=new oe.a,de=[{name:"\u555f\u52d5\u5546\u5e97\u529f\u80fd",url:"/settings/activate"},{name:"\u8b8a\u66f4\u5546\u5e97\u540d",url:"/settings/change_name"},{name:"\u8b8a\u66f4\u5bc6\u78bc",url:"/settings/change_password"}],he={change_name:{title:"\u8b8a\u66f4\u5546\u5e97\u540d",hint:"\u8acb\u8f38\u5165\u5546\u5e97\u540d",placeholder:"\u65b0\u5546\u5e97\u540d",submitUri:"https://lunchapi.hsuan.app/api/stores",method:"PUT",afterFetch:function(e){le("debug",e.id),je.set("storeId",e.id)}},change_password:{title:"\u8b8a\u66f4\u5bc6\u78bc",hint:"\u8acb\u8f38\u5165\u65b0\u5bc6\u78bc",placeholder:"\u65b0\u5bc6\u78bc",submitUri:"https://lunchapi.hsuan.app/api/change_password",method:"POST",return:["newpassword"]},activate:{title:"\u555f\u52d5\u5546\u5e97\u529f\u80fd",hint:"\u8acb\u8f38\u5165\u5546\u5e97\u540d",placeholder:"\u5546\u5e97\u540d",submitUri:"https://lunchapi.hsuan.app/api/stores",method:"POST",return:["name"],afterFetch:function(e){le("debug",e.id),je.set("storeId",e.id)}}};var ue=function(){return de.map((function(e){return Object(p.jsx)(ae.a,{children:Object(p.jsx)(ae.a.Body,{style:{display:"flex"},children:Object(p.jsx)("div",{children:Object(p.jsx)(i.b,{to:e.url,children:e.name})})})})}))},be=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=document.location.href.split("/")[5];return Object(p.jsxs)(a.a.Fragment,{children:[he[t]&&Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h2",{children:he[t].title}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:he[t].hint}),Object(p.jsx)("input",{id:"userInput",type:"text",className:"form-control",placeholder:he[t].placeholder})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(){var n=(new g.a).getAll();n.session||(window.alert("Session expired"),document.location.replace("/"));var c={method:he[t].method,headers:{Accept:"application/json",Authorization:"Bearer ".concat(n.session),"Content-Type":"application/json"}};if("POST"===he[t].method){for(var a={},r=0;r<he[t].return.length;++r){var s=document.getElementById("userInput");a[he[t].return[r]]=s.value}c.body=JSON.stringify(a)}fetch(he[t].submitUri,c).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(n){var c;console.log(n),ee.a.fire({title:"\u6210\u529f!",text:"\u66f4\u65b0\u6210\u529f, \u6b61\u8fce".concat(null!==(c=null===n||void 0===n?void 0:n.name)&&void 0!==c?c:"","!"),icon:"success",confirmButtonText:"Ok"}).then((function(){var c,a;null===(c=he[t])||void 0===c||null===(a=c.afterFetch)||void 0===a||a.call(c,n),e.props.history.go(0)}))})).catch((function(e){var t,n=JSON.parse(e.message).error;ee.a.fire({title:"\u932f\u8aa4!",html:"\u932f\u8aa4\uff1a ".concat(null!==(t=null===n||void 0===n?void 0:n.localizedMessage)&&void 0!==t?t:"","! <br>\n                        \u932f\u8aa4\u4ee3\u78bc\uff1a ").concat(null===n||void 0===n?void 0:n.code,"(").concat(null===n||void 0===n?void 0:n.status,")<br>\n                        \u5982\u554f\u984c\u6301\u7e8c\u767c\u751f\uff0c\u8acb\u63d0\u4f9b\u9019\u4e9b\u8cc7\u8a0a\u7d66\u5de5\u7a0b\u5e2b!\n                        "),icon:"error",confirmButtonText:"Ok"})}))},children:"\u78ba\u8a8d"})]}),!he[t]&&t&&Object(p.jsx)("h2",{children:"\u8acb\u8f38\u5165\u5408\u6cd5\u529f\u80fd"}),!he[t]&&!t&&Object(p.jsx)("h2",{children:"\u8acb\u9078\u53d6\u5de6\u908a\u529f\u80fd\u4ee5\u7e7c\u7e8c"})]})}}]),n}(a.a.Component),pe=Object(o.h)(be),Oe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u8a2d\u5b9a"}),Object(p.jsx)(A.a,{children:Object(p.jsxs)(E.a,{children:[Object(p.jsx)(P.a,{xs:3,children:Object(p.jsx)(ue,{})}),Object(p.jsx)(P.a,{xs:7,children:Object(p.jsx)(pe,{})})]})})]})}}]),n}(a.a.Component);var me=function(){var e=Object(c.useState)([]),t=Object(I.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!0),o=Object(I.a)(s,2),l=o[0],j=o[1];return Object(c.useEffect)((function(){!function(){var e="https://lunchapi.hsuan.app/api/stores";console.log(e),fetch(e,{method:"GET"}).then((function(e){return j(!1),e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("/")})).then((function(e){console.log(e),r(e)}))}()}),[]),Object(p.jsxs)("div",{className:"ListStore",children:[n&&(n.length>0?n.map((function(e){return Object(p.jsxs)(ae.a,{children:[Object(p.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(ae.a.Title,{children:e.name}),Object(p.jsx)(ae.a.Text,{children:e.description})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(Y.a,{variant:"primary",as:i.b,to:{pathname:"/order/".concat(e.id)},children:"\u7acb\u5373\u67e5\u770b"})})]})]},e.id)})):Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("h2",{style:{textAlign:"center"},children:"\u76ee\u524d\u7121\u76f8\u95dc\u8cc7\u6599"})]})),Object(p.jsx)("center",{children:Object(p.jsx)(W.a,{animation:"border",hidden:!l})})]})},xe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u9910\u5ef3"}),Object(p.jsx)(A.a,{children:Object(p.jsx)(me,{})})]})}}]),n}(a.a.Component),fe=n(268),ve=n(247),ge=n(248),ye=n(39),we=function(){function e(){Object(l.a)(this,e),this.cookies=new g.a}return Object(j.a)(e,[{key:"call",value:function(e,t,n){for(var c in e="https://lunchapi.hsuan.app/api"+e,t.params||{})e=e.replaceAll(":"+c,t.params[c]);var a="object"===typeof t.body?JSON.stringify(t.body):null,r=new Headers(Object(ye.a)({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.cookies.get("session"))},t.headers));fetch(e,{method:t.method,body:a,headers:r}).then((function(e){return e.json()})).then(n)}}]),e}(),ke=n(249);function Se(){var e=Object(c.useState)([]),t=Object(I.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(I.a)(r,2),i=s[0],o=s[1],l=new we;function j(){return d.apply(this,arguments)}function d(){return(d=Object(D.a)(R.a.mark((function e(){var t,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new g.a,n=t.getAll(),"https://lunchapi.hsuan.app/api/transactions",o(!0),fetch("https://lunchapi.hsuan.app/api/transactions",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("/")})).then((function(e){console.log(e),a(e),o(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){o(!0),l.call("/transactions/:transaction/rate",{method:"POST",params:{transaction:t},body:{rate:e}},(function(e){j()}))}return Object(c.useEffect)((function(){j()}),[]),Object(p.jsxs)(A.a,{children:[Object(p.jsx)(ve.a,{hidden:!i}),Object(p.jsx)("div",{className:"History",children:n&&n.length>0&&n.map((function(e){return Object(p.jsxs)(E.a,{children:[Object(p.jsx)(P.a,{sm:12,md:6,children:Object(p.jsxs)(ae.a,{children:[Object(p.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(ae.a.Body,{style:{display:"flex",flexDirection:"column"},children:[Object(p.jsxs)(ae.a.Title,{children:["\u5546\u54c1\u540d\u7a31\uff1a",e.product.name]}),Object(p.jsxs)(ae.a.Title,{children:["\u91d1\u984d\uff1a",e.total]}),Object(p.jsxs)(ae.a.Text,{children:["\u7559\u8a00\uff1a",e.comment]}),Object(p.jsxs)(ae.a.Text,{children:["\u8cfc\u8cb7\u65e5\u671f\uff1a",new Date(e.updated_at).toLocaleTimeString("zh-TW")]}),Object(p.jsxs)(ae.a.Text,{children:["\u8a02\u55ae\u7de8\u865f\uff1a",Object(p.jsx)("b",{children:e.id.substring(0,8)}),e.id.substr(8)]}),Object(p.jsxs)(ge.a,{container:!0,spacing:1,justify:"center",direction:"row",alignItems:"center",children:[Object(p.jsx)(ge.a,{item:!0,children:Object(p.jsx)(fe.a,{name:"rating",value:parseFloat(e.rating),onChange:function(t){return h(t.target.value,e.id)}})}),Object(p.jsx)(ge.a,{item:!0,children:Object(p.jsx)(w.a,{onClick:function(){return h(0,e.id)},children:Object(p.jsx)(ke.a,{size:"small"})})})]})]})]})}),Object(p.jsx)(P.a,{sm:12,md:6,style:{justifyContent:"center",display:"flex"},children:Object(p.jsx)("div",{children:Object(p.jsx)("span",{style:{alignItems:"center",fontSize:"5rem",fontStyle:"bold",display:"flex",textAlign:"center"},children:e.id.substring(0,8)})})})]},e.id)}))})]})}var Te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u6b77\u53f2\u7d00\u9304"}),Object(p.jsx)(Se,{})]})}}]),n}(a.a.Component),Ne=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u5546\u5bb6\u8a2d\u5b9a"})})}}]),n}(a.a.Component),Ie=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"optionBar",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/config/menu/new",children:"\u65b0\u589e"})})})})}}]),n}(a.a.Component);function Ce(){var e=Object(c.useState)([]),t=Object(I.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(!0),s=(new g.a).getAll();s.storeId||ee.a.fire({title:"\u932f\u8aa4!",text:"404 (STORE_NOT_FOUND)",icon:"error",confirmButtonText:"Ok"});return Object(c.useEffect)((function(){r.current&&(r.current=!1,function(){var e="https://lunchapi.hsuan.app/api/stores/"+s.storeId+"/products";fetch(e,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("#/login")})).then((function(e){console.log(e),a(e)}))}())})),Object(p.jsx)("div",{className:"storeAdded",children:n&&n.length>0&&n.map((function(e){return Object(p.jsxs)(ae.a,{children:[Object(p.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(ae.a.Title,{children:e.name}),Object(p.jsx)(ae.a.Text,{children:e.description})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(Y.a,{variant:"primary",as:i.b,to:{pathname:"/order/".concat(e.id)},children:"\u4fee\u6539"})})]})]},e.id)}))})}var Ae=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u83dc\u55ae\u8a2d\u5b9a"}),Object(p.jsxs)(A.a,{children:[Object(p.jsx)(Ie,{}),Object(p.jsx)("br",{}),Object(p.jsx)(Ce,{})]})]})}}]),n}(a.a.Component),Ee=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u9032\u968e\u8a2d\u5b9a"})})}}]),n}(a.a.Component),Pe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"});var e=new RegExp("\n","g"),t=b.docRoot+"title.json";fetch(t).then((function(e){return e.json()})).then((function(e){document.getElementById("title").innerHTML=e.title}));var n=b.docRoot+"coc.json";fetch(n).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.title.length;++n){var c=document.createElement("H2");c.textContent=t.title[n],document.getElementById("COC").appendChild(c),document.getElementById("COC").innerHTML+="<p>"+t.context[n].replace(e,"<br>")+"</p>"}var a=document.createElement("H3");a.innerText="\u6700\u5f8c\u66f4\u65b0\u65e5\u671f\uff1a"+t.date,document.getElementById("COC").appendChild(a)}))}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u884c\u70ba\u6e96\u5247"}),Object(p.jsxs)(A.a,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("p",{id:"title"}),Object(p.jsx)("div",{id:"COC"})]})]})}}]),n}(a.a.Component),_e=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"});var e=new RegExp("\n","g"),t=b.docRoot+"title.json";fetch(t).then((function(e){return e.json()})).then((function(e){document.getElementById("title").innerHTML=e.title}));var n=b.docRoot+"privacy.json";fetch(n).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.title.length;++n){var c=document.createElement("H2");c.textContent=t.title[n],document.getElementById("policy").appendChild(c),document.getElementById("policy").innerHTML+="<p>"+t.context[n].replace(e,"<br>")+"</p>"}var a=document.createElement("H3");a.innerText="\u6700\u5f8c\u66f4\u65b0\u65e5\u671f\uff1a"+t.date,document.getElementById("policy").appendChild(a)}))}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u96b1\u79c1\u6b0a\u8072\u660e"}),Object(p.jsxs)(A.a,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("p",{id:"title"}),Object(p.jsx)("div",{id:"policy"})]})]})}}]),n}(a.a.Component),Fe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={loading:!1},c}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)(A.a,{children:Object(p.jsxs)("form",{className:"signInBlock",children:[Object(p.jsx)("h3",{style:{textAlign:"center"},children:"\u5e33\u865f\u8a3b\u518a"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u555f\u52d5\u78bc"}),Object(p.jsx)("input",{id:"activateToken",type:"text",className:"form-control",placeholder:"Enter the activate code",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u96fb\u5b50\u90f5\u4ef6"}),Object(p.jsx)("input",{id:"userInputEmail",type:"email",className:"form-control",placeholder:"Enter email",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u5bc6\u78bc"}),Object(p.jsx)("input",{id:"userInputPasswd",type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u5bc6\u78bc\u78ba\u8a8d"}),Object(p.jsx)("input",{id:"userInputPasswdVerification",type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u4f7f\u7528\u8005\u540d\u7a31"}),Object(p.jsx)("input",{id:"username",type:"text",className:"form-control",placeholder:"Enter the username",required:!0})]}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(P.a,{}),Object(p.jsx)(P.a,{}),Object(p.jsx)(P.a,{children:this.state.loading?Object(p.jsx)(i.b,{className:"btn btn-primary btn-block",type:"submit",children:"\u8acb\u7a0d\u5f8c"}):Object(p.jsx)(i.b,{className:"btn btn-primary btn-block",type:"submit",onClick:function(){var t=document.getElementById("userInputPasswd"),n=document.getElementById("userInputPasswdVerification"),c=document.getElementById("userInputEmail"),a=document.getElementById("activateToken"),r=document.getElementById("username");if(t.value&&n.value&&c.value&&a.value&&r.value){if(t.value!==n.value)return window.alert("\u5bc6\u78bc\u8207\u5bc6\u78bc\u9a57\u8b49\u4e0d\u7b26"),t.value="",void(n.value="");if(-1!==c.value.search(/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/)){var s={email:c.value,name:r.value,password:t.value,registration_code:a.value};e.setState({loading:!0}),fetch("https://lunchapi.hsuan.app/api/register",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(t){console.log(t.message);var n=JSON.parse(t.message);window.alert("".concat(n.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),e.setState({loading:!1})})).then((function(t){(new g.a).set("alert","\u8a3b\u518a\u6210\u529f",{path:"/"}),window.location.replace("/login"),e.setState({loading:!1})})).catch((function(t){console.log("Failed: ".concat(t)),e.setState({loading:!1})})).then(e.setState({loading:!1}))}}},children:"\u9001\u51fa"})})]})]})})})}}]),n}(a.a.Component),Be=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)(Fe,{})})}}]),n}(a.a.Component),qe=n(259),Re=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u610f\u898b\u53cd\u994b"}),Object(p.jsx)(A.a,{children:Object(p.jsxs)(qe.a,{children:[Object(p.jsxs)(qe.a.Group,{children:[Object(p.jsx)(qe.a.Label,{children:"\u66b1\u7a31\uff1a"}),Object(p.jsx)(qe.a.Control,{id:"nickName",type:"text",placeholder:"\u5c0f/\u5927\u660e",required:!0}),Object(p.jsx)(qe.a.Text,{className:"text-muted",children:"\u6211\u5011\u7d55\u5c0d\u4e0d\u6703\u56e0\u70ba\u4f60\u7684\u66b1\u7a31\u5f88\u667a\u969c\u5c31\u4e0d\u7406\u4f60"})]}),Object(p.jsxs)(qe.a.Group,{children:[Object(p.jsx)(qe.a.Label,{children:"\u554f\u984c\uff1a"}),Object(p.jsx)(qe.a.Control,{as:"textarea",rows:"5",id:"question",required:!0})]}),Object(p.jsx)(Y.a,{variant:"primary",type:"submit",onClick:function(){var e=document.getElementById("nickName"),t=document.getElementById("question");if(""!==e.value&&""!==t.value){var n=new FormData;n.append("entry.1239005013",e.value),n.append("entry.664971969",t.value);fetch("https://docs.google.com/forms/u/0/d/e/1FAIpQLSdppxPAZlPuLMgelWDJ1wP6fIB4vScvivNrn3BZ9g7etGklCA/formResponse",{method:"POST",mode:"no-cors",body:n}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){window.alert("message sent"),console.log(e)})),window.alert("\u5df2\u7d93\u6536\u5230\u4f60\u7684\u8a0a\u606f\u4e86\n\u6211\u5011\u5c07\u6703\u52aa\u529b\u6539\u9032"),(new g.a).set("alert","\u50b3\u9001\u6210\u529f",{path:"/"}),document.location.replace("#/feedback")}},children:"\u9001\u51fa"})]})})]})}}]),n}(a.a.Component),De=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"optionBar",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsxs)(Y.a,{variant:"dark",onClick:function(){var e=b.project+"#/config/new/option";window.open(e,"","location=no,height=500,width=400,top=100,left=300").body="\u529f\u80fd\u672a\u958b\u653e"},children:[Object(p.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"}),"\u65b0\u589e\u9078\u9805"]})})})})}}]),n}(a.a.Component);function Le(){var e=Object(c.useState)(""),t=Object(I.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(I.a)(r,2),i=s[0],l=s[1],j=Object(c.useState)(""),d=Object(I.a)(j,2),h=d[0],u=d[1],b=Object(o.f)(),O=(new g.a).getAll(),m=O.storeId;function x(){return(x=Object(D.a)(R.a.mark((function e(){var t,n,c,a,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("foodTitle").value,n=document.getElementById("foodSub").value,c=document.getElementById("foodPrice").value,a="https://lunchapi.hsuan.app/api/stores/"+m+"/products",r={name:t,price:c,description:n,store_id:m,image:h},e.next=7,fetch(a,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(O.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(e),b.push("/config/menu")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)("form",{className:"foodBlock",onSubmit:function(e){e.preventDefault(),function(){x.apply(this,arguments)}()},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u98df\u7269\u540d"}),Object(p.jsx)("input",{id:"foodTitle",type:"text",className:"form-control",placeholder:"\u6a19\u984c",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u50f9\u9322"}),Object(p.jsx)("input",{id:"foodPrice",type:"number",className:"form-control",placeholder:"\u50f9\u9322",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u526f\u6a19\u984c"}),Object(p.jsx)("input",{id:"foodSub",type:"text",className:"form-control",placeholder:"\u526f\u6a19(\u9078\u586b)"})]}),Object(p.jsx)(E.a,{children:Object(p.jsx)(P.a,{children:Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)(Y.a,{as:"label",variant:"primary",hidden:""!==h,children:["\u4e0a\u50b3\u5716\u7247",Object(p.jsx)("input",{type:"file",name:"file",className:"upload-file",id:"file",onChange:function(e){console.log("Uploading");var t=O.storeId,n=new FileReader,c=e.target.files[0];n.onload=function(e){console.log(c),a(e.target.result);var n=new FormData;n.append("image",c),l(!0),fetch("https://lunchapi.hsuan.app/api/stores/"+t+"/images",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(O.session)},body:n}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(typeof e),u(e.result.data),l(!1)}))},n.readAsDataURL(c),console.log("Uploaded")},required:!0,hidden:!0})]})})})}),Object(p.jsx)(E.a,{children:Object(p.jsx)(P.a,{children:Object(p.jsxs)("center",{children:[Object(p.jsx)(W.a,{hidden:!1===i,animation:"border"}),Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:"https://lunchapi.hsuan.app/"+h,target:"_blank",hidden:!n||i,rel:"noreferrer",children:"https://lunchapi.hsuan.app/"+h}),Object(p.jsx)("br",{}),Object(p.jsx)($.a.Image,{width:300,src:n&&!i?"https://lunchapi.hsuan.app/"+h:"https://via.placeholder.com/300x180?text=Product+Image",resizeMode:"contain"})]})})}),Object(p.jsx)(E.a,{children:Object(p.jsx)("div",{className:"h-100 align-items-center",children:Object(p.jsx)("div",{id:"placeToAdd"})})}),Object(p.jsx)(E.a,{children:Object(p.jsx)(P.a,{children:Object(p.jsx)("button",{className:"btn btn-primary btn-block",children:"\u9001\u51fa"})})})]})}var ze=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u65b0\u589e\u83dc\u55ae"}),Object(p.jsxs)(A.a,{children:[Object(p.jsx)(De,{}),Object(p.jsx)("br",{}),Object(p.jsx)(Le,{})]})]})}}]),n}(a.a.Component);var Me=function(){var e=Object(c.useState)([]),t=Object(I.a)(e,2),n=t[0],r=(t[1],Object(c.useState)([])),s=Object(I.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){o(n)}),[n]),Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u9078\u9805\u8a2d\u5b9a"}),Object(p.jsxs)(A.a,{children:[Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u65b0\u9078\u9805"}),Object(p.jsx)("input",{id:"inputOption",type:"text",className:"form-control",placeholder:"\u9078\u9805\u540d"})]}),Object(p.jsx)(Y.a,{className:"btn btn-primary btn-block",children:"\u65b0\u589e"})]}),Object(p.jsx)("br",{}),i.map((function(e,t){return Object(p.jsx)(ae.a,{children:Object(p.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(p.jsx)("div",{children:Object(p.jsx)(ae.a.Title,{children:e})}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(Y.a,{variant:"primary",onClick:function(){return e=t,void window.alert(e);var e},children:"\u522a\u9664"})})]})},e)}))]})]})},Je=n(250),Ge=n(62),Ue=n(63),He=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(ae.a,{className:["m-3","p-3"],children:[Object(p.jsx)("div",{hidden:!this.props.quota.exceed_quota,children:"\u5132\u5b58\u7a7a\u9593\u5df2\u6eff"}),Object(p.jsxs)("div",{children:["\u5132\u5b58\u7a7a\u9593\u5269\u9918 ",(this.props.quota.remain/1024e3).toFixed(2)," Mb / ",this.props.quota.total," Mb (\u5df2\u7528",((this.props.quota.total-this.props.quota.remain/1024e3)/this.props.quota.total*100).toFixed(2),"%)"]})]})}}]),n}(a.a.Component),We=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:this.props.subscription.plan.name}),Object(p.jsx)("td",{children:this.props.subscription.plan.description}),Object(p.jsxs)("td",{children:[this.props.subscription.plan.disk_quota," Mb"]}),Object(p.jsx)("td",{children:null!==(e=this.props.subscription.expires_at)&&void 0!==e?e:"\u6c38\u4e45\u6709\u6548"})]})}}]),n}(a.a.Component),Ze=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).generateECPay=c.generateECPay.bind(Object(m.a)(c)),c}return Object(j.a)(n,[{key:"generateECPay",value:function(){return"https://lunchapi.hsuan.app/"+this.props.storeId+"/"+this.props.plan.id+"/sendOrder"}},{key:"render",value:function(){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:this.props.plan.name}),Object(p.jsx)("td",{children:this.props.plan.description}),Object(p.jsxs)("td",{children:[this.props.plan.disk_quota," Mb"]}),Object(p.jsx)("td",{children:Object(p.jsx)("a",{href:this.generateECPay(),rel:"noreferrer",className:"btn btn-primary",target:"_blank",children:"\u8cfc\u8cb7"})})]})}}]),n}(a.a.Component),Ke=new we,Ve=new oe.a,Qe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={quota:{},loading:!1,subscriptions:[],plans:[]},c}return Object(j.a)(n,[{key:"getDiskQuota",value:function(e){var t=this;this.setState({loading:!0}),Ke.call("/stores/:store/disk_quota",{method:"GET",params:{store:e}},(function(e){console.log(e.remain),t.setState({quota:e,loading:!1})}))}},{key:"getSubscriptions",value:function(e){var t=this;this.setState({loading:!0}),Ke.call("/stores/:store/subscriptions",{method:"GET",params:{store:e}},(function(e){console.log(e),t.setState({subscriptions:e,loading:!1})}))}},{key:"getPlans",value:function(e){var t=this;this.setState({loading:!0}),Ke.call("/plans",{method:"GET",params:{store:e}},(function(e){console.log(e),t.setState({plans:e,loading:!1})}))}},{key:"componentDidMount",value:function(e){var t=this;window.scrollTo({top:0,behavior:"smooth"});var n=Ve.get("storeId");n?(this.setState({storeId:n}),this.getDiskQuota(n),this.getSubscriptions(n),this.getPlans(n)):ee.a.fire({title:"\u932f\u8aa4!",text:"404 (STORE_NOT_FOUND)",icon:"error",confirmButtonText:"Ok"}).then((function(){return t.props.history.push("/settings/activate")}))}},{key:"render",value:function(){var e=this,t=this.state.subscriptions.map((function(e,t){return Object(p.jsx)(We,{subscription:e},e.id)})),n=this.state.plans.map((function(t,n){return Object(p.jsx)(Ze,{plan:t,storeId:e.state.storeId},t.id)}));return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsxs)("h1",{style:{textAlign:"center"},children:["\u5ba2\u670d\u4e2d\u5fc3 ",Object(p.jsx)(Ge.a,{icon:Ue.a})]}),Object(p.jsx)(E.a,{children:Object(p.jsx)(P.a,{children:Object(p.jsx)("center",{children:Object(p.jsx)(W.a,{animation:"border",hidden:!this.state.loading})})})}),Object(p.jsx)(E.a,{children:Object(p.jsx)(P.a,{children:Object(p.jsxs)(ae.a,{className:["m-3","p-3"],children:[Object(p.jsxs)("h5",{children:["\u60a8\u7684\u5e97\u5bb6ID\u70ba\uff1a ",Object(p.jsx)("b",{children:this.state.storeId})]}),Object(p.jsx)(He,{quota:this.state.quota}),Object(p.jsxs)(ae.a,{className:["m-3","p-3"],children:["\u60a8\u64c1\u6709\u7684\u65b9\u6848\u5217\u8868",Object(p.jsxs)(Je.a,{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u65b9\u6848\u540d\u7a31"}),Object(p.jsx)("th",{children:"\u8aaa\u660e"}),Object(p.jsx)("th",{children:"\u5132\u5b58\u5bb9\u91cf"}),Object(p.jsx)("th",{children:"\u5230\u671f\u6642\u9593"})]})}),Object(p.jsx)("tbody",{children:t})]})]}),Object(p.jsxs)(ae.a,{className:["m-3","p-3"],children:["\u53ef\u8cfc\u8cb7\u7684\u65b9\u6848\u5217\u8868",Object(p.jsx)("div",{className:"alert alert-danger",children:"\u76ee\u524d\u70ba\u6e2c\u8a66\u968e\u6bb5\u8acb\u52ff\u4ed8\u6b3e"}),Object(p.jsxs)(Je.a,{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u65b9\u6848\u540d\u7a31"}),Object(p.jsx)("th",{children:"\u8aaa\u660e"}),Object(p.jsx)("th",{children:"\u5132\u5b58\u5bb9\u91cf"}),Object(p.jsx)("th",{children:"\u8cfc\u8cb7"})]})}),Object(p.jsx)("tbody",{children:n})]})]})]})})})]})}}]),n}(a.a.Component),$e=Object(o.h)(Qe),Ye=n(111),Xe=n(266),et=n(141),tt=n(139),nt=n(251),ct=n(136),at=n(137),rt=n.n(at),st=n(138),it=n.n(st),ot=(n(204),new we),lt=new oe.a;window.Pusher=n(205),window.Echo=new ct.a({broadcaster:"pusher",wsHost:"lunchapi.hsuan.app",wsPath:"/websockets",wsPort:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ENDPOINT:"https://lunchapi.hsuan.app/api",REACT_APP_API_HOST:"https://lunchapi.hsuan.app",REACT_APP_WS_HOST:"lunchapi.hsuan.app",REACT_APP_WS_PATH:"/websockets",REACT_APP_PUSHER_APP_KEY:"test"}).REACT_APP_WS_PORT,disableStats:!0,key:"test",forceTLS:!1,authorizer:function(e,t){return{authorize:function(t,n){rt()({method:"POST",url:"https://lunchapi.hsuan.app/api/broadcasting/auth",headers:{Authorization:"Bearer ".concat(lt.get("session"))},data:{socket_id:t,channel_name:e.name}}).then((function(e){n(!1,e.data)})).catch((function(e){n(!0,e)}))}}}});var jt=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={transactions:[],rating:1},c}return Object(j.a)(n,[{key:"componentDidMount",value:function(e){var t=new it.a;if(window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){t.start()}),5e3),lt.get("storeId")){var n=this;ot.call("/me",{method:"GET"},(function(e){window.Echo.private("user.".concat(e.id)).listen(".transaction.created",(function(e){var t,c;console.log(e),new Notification("".concat(e.transaction.id," ").concat(null===(t=e.transaction)||void 0===t||null===(c=t.product)||void 0===c?void 0:c.name)),n.setState((function(t){return{transactions:[e.transaction].concat(Object(Ye.a)(t.transactions))}}))}))}))}else;}},{key:"requestNotification",value:function(){Notification&&"granted"===Notification.permission?new Notification("\u6e2c\u8a66\u901a\u77e5"):Notification&&"denied"!==Notification.permission?Notification.requestPermission((function(e){Notification.permission!==e&&(Notification.permission=e),"granted"===e?new Notification("\u6e2c\u8a66\u901a\u77e5"):alert("\u4f60\u4e0d\u958b\u901a\u77e5\u6211\u4e5f\u4e0d\u80fd\u63d0\u9192\u4f60")})):alert("\u4f60\u4e0d\u958b\u901a\u77e5\u6211\u4e5f\u4e0d\u80fd\u63d0\u9192\u4f60")}},{key:"transactionsToast",value:function(){return this.state.transactions.map((function(e,t){var n,c,a;return Object(p.jsxs)(Xe.a,{children:[Object(p.jsx)(et.a,{children:Object(p.jsxs)("strong",{className:"mr-auto",children:["(",e.id.substring(0,5),") ",null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.name]})}),Object(p.jsxs)(tt.a,{children:[null===e||void 0===e||null===(c=e.product)||void 0===c?void 0:c.name," x ",null===e||void 0===e?void 0:e.qty," ",Object(p.jsx)("br",{}),null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.description]})]})}))}},{key:"handleRate",value:function(e){this.setState({rating:e}),ot.call("/products/:product/rate",{params:{product:""}},(function(e){console.log(e)}))}},{key:"rating",value:function(){var e=this;return Object(p.jsxs)(P.a,{children:[Object(p.jsx)(nt.a,{children:Object(Ye.a)(Array(6).keys()).slice(1).map((function(t){return t<=e.state.rating?Object(p.jsx)(Y.a,{variant:"primary",className:["text-lg"],onClick:e.handleRate.bind(e,t),"data-star":t,children:Object(p.jsx)(Ge.a,{icon:Ue.b})},t):Object(p.jsx)(Y.a,{variant:"secondary",className:["text-lg"],onClick:e.handleRate.bind(e,t),"data-star":t,children:Object(p.jsx)(Ge.a,{icon:Ue.b})},t)}))}),"\xa0",Object(p.jsx)(Y.a,{variant:"danger",className:["text-lg"],onClick:this.handleRate.bind(this,-1),children:Object(p.jsx)(Ge.a,{icon:Ue.c})})]})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsxs)("h1",{style:{textAlign:"center"},children:["\u8a02\u55ae\u5217\u8868 ",Object(p.jsx)(Ge.a,{icon:Ue.b})]}),Object(p.jsx)(E.a,{children:Object(p.jsx)(P.a,{children:Object(p.jsx)("center",{children:Object(p.jsx)(W.a,{animation:"border",hidden:!this.state.loading})})})}),Object(p.jsx)(Y.a,{"data-intro":"Hello step one!",onClick:this.requestNotification,children:"\u50b3\u9001\u901a\u77e5"}),Object(p.jsx)(E.a,{children:this.rating()}),Object(p.jsxs)(E.a,{children:[Object(p.jsx)(P.a,{children:this.transactionsToast()}),Object(p.jsxs)(P.a,{children:[this.state.transactions.length,JSON.stringify(this.state.transactions)]})]})]})}}]),n}(a.a.Component);function dt(){var e=Object(c.useState)(!0),t=Object(I.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),o=Object(I.a)(s,2),l=o[0],j=o[1],d=new g.a,h=d.getAll(),u=function(){var e=Object(D.a)(R.a.mark((function e(){var t,n,c,a,s,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="https://lunchapi.hsuan.app/api/stores/"+h.storeId+"/transactions",e.next=4,fetch(t,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(h.session)}});case 4:return n=e.sent,e.next=7,n.json();case 7:for(i in c=e.sent,console.log(c),a={},console.log(c),c.map((function(e){return void 0===a[e.product_id]?a[e.product_id]=1:a[e.product_id]++,null})),s=[],a)console.log(a[i]),console.log(i),s.push({name:i,count:a[i]});j(s),r(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),d.set("alert","\u64cd\u4f5c\u932f\u8aa4\uff0c\u8acb\u91cd\u8a66",{path:"/"}),document.location.href="/";case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return u()}),[]),Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("center",{children:Object(p.jsx)(W.a,{animation:"border",hidden:!n})}),Object(p.jsx)("center",{children:Object(p.jsx)("h1",{children:"\u5df2\u8a02\u9910\u540d\u55ae"})}),Object(p.jsx)(A.a,{children:l?l.map((function(e){return Object(p.jsx)(ae.a,{children:Object(p.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(ae.a.Title,{children:e.name}),Object(p.jsxs)(ae.a.Text,{children:[e.count,"\u4efd"]})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(Y.a,{variant:"primary",as:i.b,to:{pathname:"/booked/detailed/".concat(e.name)},children:"\u7acb\u5373\u67e5\u770b"})})]})},e.id)})):Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("h2",{style:{textAlign:"center"},children:"\u67e5\u7121\u8cc7\u6599"})]})}),Object(p.jsx)("br",{})]})}function ht(e){var t=Object(c.useState)(!0),n=Object(I.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)([]),o=Object(I.a)(i,2),l=o[0],j=o[1],d=Object(c.useState)(""),h=Object(I.a)(d,2),u=h[0],b=h[1],O=new g.a,m=O.getAll(),x=function(){var t=Object(D.a)(R.a.mark((function t(){var n,c,a,r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://lunchapi.hsuan.app/api/stores/"+m.storeId+"/transactions",t.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(m.session)}});case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,r=[],a.map((function(t){t.product_id===e.match.params.itemId&&r.push(t)})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=Object(D.a)(R.a.mark((function t(){var n,c,a,r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://lunchapi.hsuan.app/api/stores/"+m.storeId+"/products",t.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(m.session)}});case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,r="temp",a.map((function(t){t.id===e.match.params.itemId&&(r=t.name)})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(D.a)(R.a.mark((function t(){var n;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([x(),f(e.match.params.itemId)]);case 3:n=t.sent,s(!1),b(n[1]),j(n[0]),console.log(n[0]),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),window.alert(t.t0),O.set("alert","\u8b80\u53d6\u932f\u8aa4\uff0c\u6b63\u5728\u8fd4\u56de\u9996\u9801",{path:"/"}),document.location.href="/";case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){return v()}),[]),Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsxs)("center",{children:[Object(p.jsx)("h1",{children:"\u8a73\u7d30\u8cc7\u6599"}),Object(p.jsxs)("h2",{children:["\u5546\u54c1\u540d\u7a31\uff1a",u," ",Object(p.jsx)(W.a,{animation:"border",hidden:!r})]})]}),Object(p.jsx)(A.a,{children:l?l.map((function(e){return Object(p.jsx)(ae.a,{children:Object(p.jsx)(ae.a.Body,{style:{display:"flex"},children:Object(p.jsxs)("div",{children:[Object(p.jsxs)(ae.a.Title,{children:["\u4ea4\u6613\u7de8\u865f\uff1a",e.id]}),Object(p.jsxs)(ae.a.Text,{children:["\u5099\u8a3b\uff1a",e.comment]})]})})},e.id)})):Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("h2",{style:{textAlign:"center"},children:"\u67e5\u7121\u8cc7\u6599"})]})})]})}var ut=n(252),bt=n(241),pt=n(258),Ot=n(254),mt=n(112),xt=n(253),ft=n(102),vt=new we,gt=Object(ut.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},miniIcon:{width:60,height:60}}}));function yt(e){var t=gt();return Object(p.jsx)("div",{className:t.root,children:Object(p.jsx)(bt.a,{className:t.paper,elevation:3,children:Object(p.jsxs)(ge.a,{container:!0,spacing:2,children:[Object(p.jsxs)(ge.a,{item:!0,xs:12,sm:!0,container:!0,children:[Object(p.jsxs)(ge.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(p.jsxs)(ge.a,{item:!0,xs:!0,children:[Object(p.jsxs)(pt.a,{fontSize:1,color:ft.a,hidden:parseFloat(e.product.weight)<=1,children:[Object(p.jsx)(xt.a,{style:{fontSize:12}}),"\xa0\u5ee3\u544a"]}),Object(p.jsx)(Ot.a,{gutterBottom:!0,variant:"h6",children:e.product.name}),Object(p.jsx)(Ot.a,{variant:"body2",gutterBottom:!0,children:e.product.description}),Object(p.jsxs)(Ot.a,{variant:"body2",color:"textSecondary",children:["ID: ",e.product.id]})]}),Object(p.jsx)(ge.a,{item:!0,children:Object(p.jsx)(pt.a,{component:"fieldset",mb:3,borderColor:"transparent",children:Object(p.jsx)(fe.a,{name:"read-only",value:parseFloat(e.product.ratings_avg),readOnly:!0})})})]}),Object(p.jsx)(ge.a,{item:!0,children:Object(p.jsxs)(Ot.a,{variant:"subtitle1",children:[e.product.price,"\u5143"]})})]}),Object(p.jsx)(ge.a,{item:!0,children:Object(p.jsx)(mt.a,{className:t.image,children:Object(p.jsx)("img",{className:t.img,alt:e.product.name,src:e.product.image})})})]})})})}function wt(){var e=Object(c.useRef)(!0),t=Object(c.useState)(""),n=Object(I.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)([]),l=Object(I.a)(i,2),j=l[0],d=l[1],h=Object(c.useState)(!1),u=Object(I.a)(h,2),b=u[0],O=u[1],m=Object(o.g)(),x=a.a.useCallback((function(e){var t;O(!0),t="string"===typeof e?e:r,vt.call("/products/query",{method:"POST",body:{term:t}},(function(e){d(e),O(!1)}))}),[r]);Object(c.useEffect)((function(){if(e.current){e.current=!1,window.scrollTo({top:0,behavior:"smooth"});var t=new URLSearchParams(m.search).get("q");s(t),x(t)}}),[m.search,x]);var f=j.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)(yt,{product:e}),Object(p.jsx)("br",{})]},e.id)}));return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)(ve.a,{hidden:!b}),Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u641c\u5c0b\u7d50\u679c"}),Object(p.jsxs)(A.a,{children:[Object(p.jsx)(y.a,{id:"filled-full-width",label:"\u641c\u5c0b\u98df\u7269",style:{margin:8},placeholder:"\u60f3\u5403\u7684\u6771\u897f",helperText:"\u60f3\u5403\u7684\u6771\u897f",fullWidth:!0,value:r,margin:"normal",InputLabelProps:{shrink:!0},onChange:function(e){s(e.target.value)},variant:"filled",InputProps:{endAdornment:Object(p.jsx)(w.a,{onClick:x,children:Object(p.jsx)(S.a,{})})}}),Object(p.jsx)("h5",{style:{textAlign:"center"},hidden:b||0!==j.length,children:"\u76ee\u524d\u7121\u76f8\u95dc\u8cc7\u6599"}),f]})]})}var kt=n(140),St=n(260),Tt=n(255);function Nt(e){var t=e.children,n=e.value,c=e.index,a=Object(kt.a)(e,["children","value","index"]);return Object(p.jsx)("div",Object(ye.a)(Object(ye.a)({role:"tabpanel",hidden:n!==c,id:"vertical-tabpanel-".concat(c),"aria-labelledby":"vertical-tab-".concat(c)},a),{},{children:n===c&&Object(p.jsx)(pt.a,{p:3,children:Object(p.jsx)(Ot.a,{children:t})})}))}function It(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Ct=Object(ut.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}}));function At(){var e=Ct(),t=a.a.useState(0),n=Object(I.a)(t,2),c=n[0],r=n[1];return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u958b\u767c\u8005\u8a2d\u5b9a"}),Object(p.jsxs)("div",{className:e.root,children:[Object(p.jsxs)(St.a,{orientation:"vertical",variant:"scrollable",value:c,onChange:function(e,t){r(t)},"aria-label":"Vertical tabs example",className:e.tabs,children:[Object(p.jsx)(Tt.a,Object(ye.a)({label:"Session \u8a2d\u5b9a"},It(0))),Object(p.jsx)(Tt.a,Object(ye.a)({label:"Item Two"},It(1))),Object(p.jsx)(Tt.a,Object(ye.a)({label:"Item Three"},It(2))),Object(p.jsx)(Tt.a,Object(ye.a)({label:"Item Four"},It(3))),Object(p.jsx)(Tt.a,Object(ye.a)({label:"Item Five"},It(4))),Object(p.jsx)(Tt.a,Object(ye.a)({label:"Item Six"},It(5))),Object(p.jsx)(Tt.a,Object(ye.a)({label:"Item Seven"},It(6)))]}),Object(p.jsxs)(Nt,{value:c,index:0,children:["\u8a2d\u5b9a\u8a2d\u5b9a",Object(p.jsx)("br",{}),Object(p.jsx)(y.a,{id:"term",value:"",label:"API Token",variant:"outlined",size:"small",InputProps:{endAdornment:Object(p.jsx)(w.a,{onClick:this.searchProduct,children:Object(p.jsx)(S.a,{})})}})]}),Object(p.jsx)(Nt,{value:c,index:1,children:"Item Two"}),Object(p.jsx)(Nt,{value:c,index:2,children:"Item Three"}),Object(p.jsx)(Nt,{value:c,index:3,children:"Item Four"}),Object(p.jsx)(Nt,{value:c,index:4,children:"Item Five"}),Object(p.jsx)(Nt,{value:c,index:5,children:"Item Six"}),Object(p.jsx)(Nt,{value:c,index:6,children:"Item Seven"})]})]})}var Et=function(){return Object(p.jsxs)(i.a,{children:[Object(p.jsx)(O,{}),Object(p.jsx)(N,{}),Object(p.jsx)(C,{}),Object(p.jsxs)(o.c,{children:[Object(p.jsx)(o.a,{path:"/login",component:Q}),Object(p.jsx)(o.a,{path:"/booked/detailed/:itemId",component:ht}),Object(p.jsx)(o.a,{path:"/booked",component:dt}),Object(p.jsx)(o.a,{path:"/query",component:wt}),Object(p.jsx)(o.a,{path:"/restaurant",component:xe}),Object(p.jsx)(o.a,{path:"/settings",component:Oe}),Object(p.jsx)(o.a,{path:"/purchase/:store/:product",component:ce}),Object(p.jsx)(o.a,{path:"/order/:storeId",component:se}),Object(p.jsx)(o.a,{path:"/history",component:Te}),Object(p.jsx)(o.a,{path:"/service",component:$e}),Object(p.jsx)(o.a,{path:"/sells/test",component:jt}),Object(p.jsx)(o.a,{path:"/config/new/option",component:Me}),Object(p.jsx)(o.a,{path:"/config/store",component:Ne}),Object(p.jsx)(o.a,{path:"/config/menu/new",component:ze}),Object(p.jsx)(o.a,{path:"/config/menu",component:Ae}),Object(p.jsx)(o.a,{path:"/config/advanced/:id",component:Ee}),Object(p.jsx)(o.a,{path:"/privacy",component:_e}),Object(p.jsx)(o.a,{path:"/COC",component:Pe}),Object(p.jsx)(o.a,{path:"/signup",component:Be}),Object(p.jsx)(o.a,{path:"/feedback",component:Re}),Object(p.jsx)(o.a,{path:"/dev",component:At}),Object(p.jsx)(o.a,{path:"/",component:H})]}),Object(p.jsx)(_,{})]})},Pt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,270)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(Et,{})}),document.getElementById("root")),Pt()},33:function(e){e.exports=JSON.parse('{"baseURL":"https://lunchapi.hsuan.app/api/","project":"https://tnfsa.github.io","gmailSuffix":"gm.tnfsh.tn.edu.tw","docRoot":"https://tnfsa.github.io/document/","googleCloudPlatformId":"1081268402297-stef8id8lhkhjd7lvh1de82eubmcn3re","version":"0.3.0 \u6e2c\u8a66\u7248"}')}},[[206,1,2]]]);
//# sourceMappingURL=main.e733b2ae.chunk.js.map