/*! For license information please see main.fdb281f1.chunk.js.LICENSE.txt */
(this["webpackJsonplunch-wpa"]=this["webpackJsonplunch-wpa"]||[]).push([[0],{160:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(21),s=n.n(r),i=(n(160),n(16)),o=n.n(i),l=n(25),j=(n(162),n(18)),d=n(29),h=n(10),u=n(11),b=n(13),p=n(12),O=n(127),m=n(33),x=n(1),f=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e={url:m.docRoot+"status.json"};return Object(x.jsx)(O.Offline,{polling:e,children:Object(x.jsx)("p",{style:{textAlign:"center"},className:"p-3 mb-2 bg-danger text-white",children:"\u96e2\u7dda\u4e2d\uff0c\u8acb\u6aa2\u5bdf\u60a8\u7684\u9023\u7dda\u72c0\u6cc1"})})}}]),n}(a.a.Component),v=n(60),g=n(263),y=n(264),w=n(258),k=n(17),S=n(259),T=n(243),N=n(71),I=n.n(N),C=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var c;Object(h.a)(this,n),c=t.call(this,e);var a=(new k.a).getAll(),r=[];return a.isGoogle?r.push(!0):r.push(!1),a.isSells?r.push(!0):r.push(!1),a.session?r.push(!0):r.push(!1),c.state={isGoogle:r[0],isSells:r[1],isLoggedIn:r[2],username:a.userName||"Anonymous",searchTerm:""},c.handleSearchTermChange=c.handleSearchTermChange.bind(Object(v.a)(c)),c.searchProduct=c.searchProduct.bind(Object(v.a)(c)),c}return Object(u.a)(n,[{key:"searchProduct",value:function(){this.props.location.pathname.indexOf("query")>-1?(this.props.history.replace("/query?q="+this.state.searchTerm),this.props.history.go(0)):this.props.history.push("/query?q="+this.state.searchTerm)}},{key:"handleSearchTermChange",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){var e="\u55e8! "+this.state.username;return Object(x.jsx)(a.a.Fragment,{children:Object(x.jsxs)(g.a,{bg:"light",expand:"lg",children:[Object(x.jsx)(g.a.Brand,{href:"/",children:"\u7f8e\u5ee3\u8a02\u9910\u7cfb\u7d71"}),Object(x.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsxs)(g.a.Collapse,{id:"basic-navbar-nav",children:[Object(x.jsxs)(y.a,{className:"mr-auto",children:[Object(x.jsx)(y.a.Link,{href:"#/restaurant",children:"\u9910\u5ef3"}),this.state.isSells&&Object(x.jsxs)(w.a,{title:"\u5546\u5bb6\u7ba1\u7406",id:"basic-nav-dropdown",children:[Object(x.jsx)(w.a.Item,{href:"#/config/menu",children:"\u83dc\u55ae\u8a2d\u5b9a"}),Object(x.jsx)(w.a.Item,{as:j.b,to:"/service",children:"\u5ba2\u670d\u670d\u52d9"}),Object(x.jsx)(w.a.Item,{as:j.b,to:"/booked",children:"\u51fa\u9910"})]}),Object(x.jsxs)(w.a,{title:"\u76f8\u95dc\u9023\u7d50",id:"basic-nav-dropdown",children:[Object(x.jsx)(w.a.Item,{href:"https://sites.google.com/view/tnfshsu/",rel:"noreferrer noopener",target:"_blank",children:"\u5b78\u806f\u6703"}),Object(x.jsx)(w.a.Item,{href:"https://tnfsacec.github.io",rel:"noreferrer noopener",target:"_blank",children:"\u9078\u59d4\u6703"})]}),Object(x.jsx)(S.a,{value:this.state.searchTerm,onChange:this.handleSearchTermChange,id:"term",label:"\u641c\u5c0b\u60f3\u5403\u7684",variant:"outlined",size:"small",InputProps:{endAdornment:Object(x.jsx)(T.a,{onClick:this.searchProduct,children:Object(x.jsx)(I.a,{})})}})]}),this.state.isLoggedIn?Object(x.jsxs)(w.a,{title:e,id:"basic-nav-dropdown",children:[Object(x.jsx)(w.a.Item,{href:"#/history",children:"\u6b77\u53f2\u7d00\u9304"}),Object(x.jsx)(w.a.Item,{href:"#/settings",children:"\u8a2d\u5b9a"}),Object(x.jsx)(w.a.Item,{href:"#/profile",children:"\u500b\u4eba\u6a94\u6848"}),Object(x.jsx)(w.a.Item,{onClick:function(){var e=new k.a;e.remove("id"),e.remove("isGoogle"),e.remove("isSells"),e.remove("session"),e.remove("userName"),e.remove("storeId"),e.remove("name"),e.set("alert","\u767b\u51fa\u6210\u529f",{path:"/"}),window.location.href="/"},children:"\u767b\u51fa"})]}):Object(x.jsxs)(y.a,{children:[Object(x.jsx)(y.a.Link,{href:"#/signup",children:"\u8a3b\u518a"}),Object(x.jsx)(y.a.Link,{href:"#/login",children:"\u767b\u5165"})]})]})]})})}}]),n}(a.a.Component),A=Object(d.h)(C),E=n(14);function P(e){var t=new k.a,n=t.getAll(),r=Object(c.useState)(!1),s=Object(E.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(),j=Object(E.a)(l,2),d=j[0],h=j[1];return window.addEventListener("hashchange",(function(){void 0!==n.alert?(h(n.alert),o(!0),t.remove("alert")):o(!1)})),Object(x.jsx)(a.a.Fragment,{children:Object(x.jsx)("p",{className:"p-3 mb-2 bg-success text-white",hidden:!i,children:d})})}var _=n(244),B=n(245),F=n(134),q=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"p-3 mb-2 bg-dark text-white ",children:Object(x.jsxs)(_.a,{children:[Object(x.jsx)("br",{}),Object(x.jsxs)(B.a,{children:[Object(x.jsxs)(F.a,{children:[Object(x.jsx)(j.b,{to:"/privacy",children:"\u96b1\u79c1\u6b0a\u8072\u660e"}),Object(x.jsx)("br",{}),Object(x.jsx)(j.b,{to:"/COC",children:"\u884c\u70ba\u6e96\u5247"}),Object(x.jsx)("br",{}),Object(x.jsx)(j.b,{to:"/feedback",children:"\u610f\u898b\u53cd\u994b"})]}),Object(x.jsxs)(F.a,{children:["\u95dc\u65bc\u6211\u5011\uff1a",Object(x.jsx)("br",{}),Object(x.jsx)("a",{href:"https://sivir.pw",rel:"noreferrer noopener",target:"_blank",children:"Milliax"}),"\u3001",Object(x.jsx)("a",{href:"https://hsuan.app/",rel:"noreferrer noopener",target:"_blank",children:"Hsuan1117"}),"\u3001",Object(x.jsx)("a",{href:"https://neodoggy.github.io/",rel:"noreferrer noopener",target:"_blank",children:"Neodoggy"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:["version: ",m.version]})]})]})]})})]})}}]),n}(a.a.Component),M=n(58),R=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(M.a,{children:[Object(x.jsxs)(M.a.Item,{children:[Object(x.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"First slide"}),Object(x.jsxs)(M.a.Caption,{children:[Object(x.jsx)("h3",{children:"First slide label"}),Object(x.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]}),Object(x.jsxs)(M.a.Item,{children:[Object(x.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"Second slide"}),Object(x.jsxs)(M.a.Caption,{children:[Object(x.jsx)("h3",{children:"Second slide label"}),Object(x.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]}),Object(x.jsxs)(M.a.Item,{children:[Object(x.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"Third slide"}),Object(x.jsxs)(M.a.Caption,{children:[Object(x.jsx)("h3",{children:"Third slide label"}),Object(x.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]})]})}}]),n}(a.a.Component),D=n(267),z=n(246),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");L?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):U(t,e)}))}}function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function G(){var e=Object(c.useState)(!1),t=Object(E.a)(e,2),n=t[0],a=t[1];function r(){return s.apply(this,arguments)}function s(){return(s=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({});case 2:a(!1),window.location.reload(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){J({onUpdate:function(e){window.alert("\u767c\u73fe\u65b0\u7248\u672c\uff01\uff01\uff01 \u9ede\u6b64\u7acb\u5373\u66f4\u65b0"),e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}})}),[]),Object(x.jsx)(D.a,{open:n,message:"A new version is available!",onClick:r,anchorOrigin:{vertical:"top",horizontal:"center"},action:Object(x.jsx)(z.a,{color:"inherit",size:"small",onClick:r,children:"Reload"})})}var H=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsx)(a.a.Fragment,{children:Object(x.jsxs)(_.a,{children:[Object(x.jsx)(G,{}),Object(x.jsx)(R,{})]})})}}]),n}(a.a.Component),W=n(247),Z=n(135),K=n.n(Z),V=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=m.googleCloudPlatformId+".apps.googleusercontent.com",t=function(e){console.log(JSON.stringify(e));var t={token:e.accessToken};fetch("https://lunchapi.hsuan.app/api/google",{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(t){var n;if(void 0!==e.profileObj.givenName){var c=new k.a;c.set("session",t.access_token,{path:"/"}),c.set("isGoogle","true",{path:"/"}),c.set("alert","\u767b\u5165\u6210\u529f",{path:"/"}),c.set("userName",null===e||void 0===e||null===(n=e.profileObj)||void 0===n?void 0:n.givenName,{path:"/"}),window.location.replace("/")}})).catch((function(e){console.log("Failed: ".concat(e))}))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(K.a,{clientId:e,buttonText:"\u4f7f\u7528 Google \u767b\u5165",onSuccess:t,onFailure:t,hostedDomain:m.gmailSuffix,cookiePolicy:"single_host_origin"})})}}]),n}(a.a.Component),Q=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={loading:!1},c}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){var e=this;return Object(x.jsx)(a.a.Fragment,{children:Object(x.jsx)(_.a,{children:Object(x.jsxs)("form",{className:"signInBlock",children:[Object(x.jsx)("h3",{style:{textAlign:"center"},className:"p-2",children:"\u767b\u5165"}),Object(x.jsx)("center",{hidden:!this.state.loading,children:Object(x.jsx)(W.a,{animation:"border"})}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u96fb\u5b50\u90f5\u4ef6"}),Object(x.jsx)("input",{id:"userInputEmail",type:"email",className:"form-control",placeholder:"Enter email"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u5bc6\u78bc"}),Object(x.jsx)("input",{id:"userInputPasswd",type:"password",className:"form-control",placeholder:"Enter password"})]}),Object(x.jsxs)(B.a,{children:[Object(x.jsx)(F.a,{}),Object(x.jsx)(F.a,{}),Object(x.jsx)(F.a,{children:Object(x.jsx)(j.b,{className:"btn btn-primary btn-block",onClick:function(){var t=document.getElementById("userInputEmail"),n=document.getElementById("userInputPasswd");if(-1!==t.value.search(/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/)){var c={email:t.value,password:n.value};e.setState({loading:!0}),fetch("https://lunchapi.hsuan.app/api/login",{method:"POST",body:JSON.stringify(c),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){var t=new k.a;return t.set("session",e.access_token,{path:"/"}),t.set("alert","\u767b\u5165\u6210\u529f",{path:"/"}),e})).catch((function(e){console.log("Failed: ".concat(e))})).then((function(t){fetch("https://lunchapi.hsuan.app/api/me",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.access_token)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(t){var n=new k.a;n.set("userName",t.name,{path:"/"}),n.set("id",t.id,{path:"/"}),n.set("isSells",!0,{path:"/"}),void 0!==t.stores[0]&&n.set("storeId",t.stores[0].id,{path:"/"}),e.setState({loading:!1}),document.location.replace("/")}))}))}},children:"Submit"})})]}),Object(x.jsx)("hr",{}),Object(x.jsx)("label",{children:"\u5176\u4ed6\u767b\u5165\u65b9\u5f0f\uff1f"}),Object(x.jsx)("div",{className:"otherLoginMethod",children:Object(x.jsx)(V,{})})]})})})}}]),n}(a.a.Component),$=n(265),Y=n(130),X=n(36),ee=n.n(X),te=n(239);function ne(e){var t=Object(c.useState)(""),n=Object(E.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(""),j=Object(E.a)(i,2),h=j[0],u=j[1],b=Object(c.useState)(""),p=Object(E.a)(b,2),O=p[0],m=p[1],f=Object(c.useState)(""),v=Object(E.a)(f,2),g=v[0],y=v[1],w=Object(c.useState)(""),S=Object(E.a)(w,2),T=S[0],N=S[1],I=Object(d.f)(),C="https://lunchapi.hsuan.app/api/stores/"+e.store+"/products/"+e.product;function A(){return(A=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(C,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){m(e.price),y(e.description),s(e.name),u(e.image)})).catch((function(e){var t=JSON.parse(e.message);ee.a.fire({title:"\u932f\u8aa4!",text:"".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"),icon:"error",confirmButtonText:"Ok"}).then((function(){return I.push("/")}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=(new k.a).getAll();return Object(c.useEffect)((function(){!function(){A.apply(this,arguments)}()})),Object(x.jsx)(a.a.Fragment,{children:Object(x.jsxs)(_.a,{children:[Object(x.jsx)("br",{}),Object(x.jsxs)(B.a,{children:[Object(x.jsx)(F.a,{children:Object(x.jsxs)($.a,{children:[Object(x.jsx)($.a.Caption,{className:"text-center",children:Object(x.jsxs)("h1",{children:["\u9910\u9ede\uff1a",r]})}),Object(x.jsx)($.a.Image,{width:300,alt:"\u9910\u9ede\u7684\u7167\u7247",src:"https://lunchapi.hsuan.app/"+h,resizeMode:"contain"})]})}),Object(x.jsxs)(F.a,{children:["\u63cf\u8ff0\uff1a",g]})]}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsxs)("h5",{children:["\u5efa\u8b70\u552e\u50f9\uff1a",O]})})}),Object(x.jsxs)(B.a,{children:[Object(x.jsx)(F.a,{lg:10,children:Object(x.jsx)(te.a,{className:"form-control",placeholder:"\u7559\u8a00",rows:"5",onChange:function(e){return N(e.target.value)},value:T})}),Object(x.jsxs)(F.a,{lg:3,children:[Object(x.jsx)("br",{}),Object(x.jsx)("div",{style:{display:"flex"},children:Object(x.jsx)("div",{style:{marginLeft:"auto"},children:Object(x.jsx)(Y.a,{variant:"primary",onClick:function(){var t="\u8acb\u78ba\u8a8d\u60a8\u7684\u8a02\u8cfc\u8cc7\u8a0a\n\u540d\u7a31\uff1a".concat(r,"\n\u552e\u50f9\uff1a").concat(O,"\n\u5176\u4ed6\u5efa\u8b70\uff1a").concat(T,"\n\u6309 OK \u9001\u51fa\uff1bcancel \u53d6\u6d88");if(window.confirm(t)){fetch("https://lunchapi.hsuan.app/api/transactions",{method:"POST",body:JSON.stringify({name:r,qty:1,store_id:e.store,product_id:e.product,comment:T,options:{}}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(P.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){ee.a.fire({title:"\u8a02\u8cfc\u6210\u529f!",html:"\u611f\u8b1d\u60a8\u5229\u7528\u672c\u7cfb\u7d71\u8a02\u8cfc\u7522\u54c1<br>\u8acb\u8a18\u5f97\u65bc\u9078\u53d6\u6642\u9593\u53d6\u9910\uff0c\u8b1d\u8b1d<br>"+"\u60a8\u7684\u4ea4\u6613ID\u70ba\uff1a <b>".concat(e.id,"</b>"),icon:"success",confirmButtonText:"Ok"}).then((function(){return I.push("/")}))})).catch((function(e){console.log(e);var t=JSON.parse(e.message);ee.a.fire({title:"\u932f\u8aa4!",text:"".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"),icon:"error",confirmButtonText:"Ok"}).then((function(){return I.push("/")}))}))}else ee.a.fire({title:"\u932f\u8aa4!",text:"\u8a02\u55ae\u672a\u6210\u7acb",icon:"error",confirmButtonText:"Ok"}).then()},children:"\u8a02\u8cfc"})})})]})]})]})})}var ce=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u8a02\u9910"}),Object(x.jsx)(ne,{store:this.props.match.params.store,product:this.props.match.params.product})]})}}]),n}(a.a.Component),ae=n(266);var re=function(e){var t=Object(c.useState)([]),n=Object(E.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(!1),h=Object(E.a)(i,2),u=h[0],b=h[1],p=Object(d.f)(),O=Object(c.useRef)(!0),m=Object(c.useState)(!1),f=Object(E.a)(m,2),v=f[0],g=f[1],y=(new k.a).getAll();function w(){return(w=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b(!0),n="https://lunchapi.hsuan.app/api/stores/"+e.storeId+"/products",fetch(n,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),p.push("/login")})).then((function(t){console.log(t);for(var n=0;n<t.length;++n)t[n].storeId=e.storeId;s(t),b(!1),void 0!==y.session&&g(!0)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){O.current&&(O.current=!1,function(){w.apply(this,arguments)}())})),Object(x.jsxs)("div",{className:"ListStore",children:[Object(x.jsx)("center",{children:Object(x.jsx)(W.a,{animation:"border",hidden:!u})}),r&&(r.length>0?r.map((function(e){return Object(x.jsxs)(ae.a,{children:[Object(x.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(x.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(ae.a.Title,{children:e.name}),Object(x.jsx)(ae.a.Text,{children:e.description})]}),Object(x.jsx)("div",{style:{marginLeft:"auto"},children:Object(x.jsx)(Y.a,{variant:"primary",as:j.b,hidden:!v,to:{pathname:"/purchase/".concat(e.storeId,"/").concat(e.id)},children:"\u7acb\u5373\u8a02\u8cfc"})})]})]},e.id)})):Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("h2",{style:{textAlign:"center"},children:"\u67e5\u7121\u8cc7\u6599"})]}))]})},se=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"}),console.log(this.props.match.params)}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u5403\u4ec0\u9ebc"}),Object(x.jsx)(_.a,{children:Object(x.jsx)(re,{storeId:this.props.match.params.storeId})})]})}}]),n}(a.a.Component),ie=n(72),oe=n.n(ie);function le(e,t){console.log("[".concat(e.toUpperCase(),"] ").concat(t,'"'))}var je=new oe.a,de=[{name:"\u555f\u52d5\u5546\u5e97\u529f\u80fd",url:"/settings/activate"},{name:"\u8b8a\u66f4\u5546\u5e97\u540d",url:"/settings/change_name"},{name:"\u8b8a\u66f4\u5bc6\u78bc",url:"/settings/change_password"}],he={change_name:{title:"\u8b8a\u66f4\u5546\u5e97\u540d",hint:"\u8acb\u8f38\u5165\u5546\u5e97\u540d",placeholder:"\u65b0\u5546\u5e97\u540d",submitUri:"https://lunchapi.hsuan.app/api/stores",method:"PUT",afterFetch:function(e){le("debug",e.id),je.set("storeId",e.id)}},change_password:{title:"\u8b8a\u66f4\u5bc6\u78bc",hint:"\u8acb\u8f38\u5165\u65b0\u5bc6\u78bc",placeholder:"\u65b0\u5bc6\u78bc",submitUri:"https://lunchapi.hsuan.app/api/change_password",method:"POST",return:["newpassword"]},activate:{title:"\u555f\u52d5\u5546\u5e97\u529f\u80fd",hint:"\u8acb\u8f38\u5165\u5546\u5e97\u540d",placeholder:"\u5546\u5e97\u540d",submitUri:"https://lunchapi.hsuan.app/api/stores",method:"POST",return:["name"],afterFetch:function(e){le("debug",e.id),je.set("storeId",e.id)}}};var ue=function(){return de.map((function(e){return Object(x.jsx)(ae.a,{children:Object(x.jsx)(ae.a.Body,{style:{display:"flex"},children:Object(x.jsx)("div",{children:Object(x.jsx)(j.b,{to:e.url,children:e.name})})})})}))},be=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=document.location.href.split("/")[5];return Object(x.jsxs)(a.a.Fragment,{children:[he[t]&&Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h2",{children:he[t].title}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:he[t].hint}),Object(x.jsx)("input",{id:"userInput",type:"text",className:"form-control",placeholder:he[t].placeholder})]}),Object(x.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(){var n=(new k.a).getAll();n.session||(window.alert("Session expired"),document.location.replace("/"));var c={method:he[t].method,headers:{Accept:"application/json",Authorization:"Bearer ".concat(n.session),"Content-Type":"application/json"}};if("POST"===he[t].method){for(var a={},r=0;r<he[t].return.length;++r){var s=document.getElementById("userInput");a[he[t].return[r]]=s.value}c.body=JSON.stringify(a)}fetch(he[t].submitUri,c).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(n){var c;console.log(n),ee.a.fire({title:"\u6210\u529f!",text:"\u66f4\u65b0\u6210\u529f, \u6b61\u8fce".concat(null!==(c=null===n||void 0===n?void 0:n.name)&&void 0!==c?c:"","!"),icon:"success",confirmButtonText:"Ok"}).then((function(){var c,a;null===(c=he[t])||void 0===c||null===(a=c.afterFetch)||void 0===a||a.call(c,n),e.props.history.go(0)}))})).catch((function(e){var t,n=JSON.parse(e.message).error;ee.a.fire({title:"\u932f\u8aa4!",html:"\u932f\u8aa4\uff1a ".concat(null!==(t=null===n||void 0===n?void 0:n.localizedMessage)&&void 0!==t?t:"","! <br>\n                        \u932f\u8aa4\u4ee3\u78bc\uff1a ").concat(null===n||void 0===n?void 0:n.code,"(").concat(null===n||void 0===n?void 0:n.status,")<br>\n                        \u5982\u554f\u984c\u6301\u7e8c\u767c\u751f\uff0c\u8acb\u63d0\u4f9b\u9019\u4e9b\u8cc7\u8a0a\u7d66\u5de5\u7a0b\u5e2b!\n                        "),icon:"error",confirmButtonText:"Ok"})}))},children:"\u78ba\u8a8d"})]}),!he[t]&&t&&Object(x.jsx)("h2",{children:"\u8acb\u8f38\u5165\u5408\u6cd5\u529f\u80fd"}),!he[t]&&!t&&Object(x.jsx)("h2",{children:"\u8acb\u9078\u53d6\u5de6\u908a\u529f\u80fd\u4ee5\u7e7c\u7e8c"})]})}}]),n}(a.a.Component),pe=Object(d.h)(be),Oe=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u8a2d\u5b9a"}),Object(x.jsx)(_.a,{children:Object(x.jsxs)(B.a,{children:[Object(x.jsx)(F.a,{xs:3,children:Object(x.jsx)(ue,{})}),Object(x.jsx)(F.a,{xs:7,children:Object(x.jsx)(pe,{})})]})})]})}}]),n}(a.a.Component);var me=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!0),i=Object(E.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){!function(){var e="https://lunchapi.hsuan.app/api/stores";console.log(e),fetch(e,{method:"GET"}).then((function(e){return l(!1),e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("/")})).then((function(e){console.log(e),r(e)}))}()}),[]),Object(x.jsxs)("div",{className:"ListStore",children:[n&&(n.length>0?n.map((function(e){return Object(x.jsxs)(ae.a,{children:[Object(x.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(x.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(ae.a.Title,{children:e.name}),Object(x.jsx)(ae.a.Text,{children:e.description})]}),Object(x.jsx)("div",{style:{marginLeft:"auto"},children:Object(x.jsx)(Y.a,{variant:"primary",as:j.b,to:{pathname:"/order/".concat(e.id)},children:"\u7acb\u5373\u67e5\u770b"})})]})]},e.id)})):Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("h2",{style:{textAlign:"center"},children:"\u76ee\u524d\u7121\u76f8\u95dc\u8cc7\u6599"})]})),Object(x.jsx)("center",{children:Object(x.jsx)(W.a,{animation:"border",hidden:!o})})]})},xe=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u9910\u5ef3"}),Object(x.jsx)(_.a,{children:Object(x.jsx)(me,{})})]})}}]),n}(a.a.Component),fe=n(270),ve=n(248),ge=n(249),ye=n(39),we=function(){function e(){Object(h.a)(this,e),this.cookies=new k.a}return Object(u.a)(e,[{key:"call",value:function(e,t,n){for(var c in e="https://lunchapi.hsuan.app/api"+e,t.params||{})e=e.replaceAll(":"+c,t.params[c]);var a="object"===typeof t.body?JSON.stringify(t.body):null,r=new Headers(Object(ye.a)({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.cookies.get("session"))},t.headers));fetch(e,{method:t.method,body:a,headers:r}).then((function(e){return e.json()})).then(n)}}]),e}(),ke=n(250);function Se(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(E.a)(r,2),i=s[0],j=s[1],d=new we;function h(){return u.apply(this,arguments)}function u(){return(u=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new k.a,n=t.getAll(),"https://lunchapi.hsuan.app/api/transactions",j(!0),fetch("https://lunchapi.hsuan.app/api/transactions",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("/")})).then((function(e){console.log(e),a(e),j(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){j(!0),d.call("/transactions/:transaction/rate",{method:"POST",params:{transaction:t},body:{rate:e}},(function(e){h()}))}return Object(c.useEffect)((function(){h()}),[]),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(ve.a,{hidden:!i}),Object(x.jsx)("div",{className:"History",children:n&&n.length>0&&n.map((function(e){return Object(x.jsxs)(B.a,{children:[Object(x.jsx)(F.a,{sm:12,md:6,children:Object(x.jsxs)(ae.a,{children:[Object(x.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(x.jsxs)(ae.a.Body,{style:{display:"flex",flexDirection:"column"},children:[Object(x.jsxs)(ae.a.Title,{children:["\u5546\u54c1\u540d\u7a31\uff1a",e.product.name]}),Object(x.jsxs)(ae.a.Title,{children:["\u91d1\u984d\uff1a",e.total]}),Object(x.jsxs)(ae.a.Text,{children:["\u7559\u8a00\uff1a",e.comment]}),Object(x.jsxs)(ae.a.Text,{children:["\u8cfc\u8cb7\u65e5\u671f\uff1a",new Date(e.updated_at).toLocaleTimeString("zh-TW")]}),Object(x.jsxs)(ae.a.Text,{children:["\u8a02\u55ae\u7de8\u865f\uff1a",Object(x.jsx)("b",{children:e.id.substring(0,8)}),e.id.substr(8)]}),Object(x.jsxs)(ge.a,{container:!0,spacing:1,justify:"center",direction:"row",alignItems:"center",children:[Object(x.jsx)(ge.a,{item:!0,children:Object(x.jsx)(fe.a,{name:"rating",value:parseFloat(e.rating),onChange:function(t){return b(t.target.value,e.id)}})}),Object(x.jsx)(ge.a,{item:!0,children:Object(x.jsx)(T.a,{onClick:function(){return b(0,e.id)},children:Object(x.jsx)(ke.a,{size:"small"})})})]})]})]})}),Object(x.jsx)(F.a,{sm:12,md:6,style:{justifyContent:"center",display:"flex"},children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{style:{alignItems:"center",fontSize:"5rem",fontStyle:"bold",display:"flex",textAlign:"center"},children:e.id.substring(0,8)})})})]},e.id)}))})]})}var Te=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u6b77\u53f2\u7d00\u9304"}),Object(x.jsx)(Se,{})]})}}]),n}(a.a.Component),Ne=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsx)(a.a.Fragment,{children:Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u5546\u5bb6\u8a2d\u5b9a"})})}}]),n}(a.a.Component),Ie=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"optionBar",children:Object(x.jsx)("ul",{children:Object(x.jsx)("li",{children:Object(x.jsx)(j.b,{to:"/config/menu/new",children:"\u65b0\u589e"})})})})}}]),n}(a.a.Component);function Ce(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(!0),s=(new k.a).getAll();s.storeId||ee.a.fire({title:"\u932f\u8aa4!",text:"404 (STORE_NOT_FOUND)",icon:"error",confirmButtonText:"Ok"});return Object(c.useEffect)((function(){r.current&&(r.current=!1,function(){var e="https://lunchapi.hsuan.app/api/stores/"+s.storeId+"/products";fetch(e,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("#/login")})).then((function(e){console.log(e),a(e)}))}())})),Object(x.jsx)("div",{className:"storeAdded",children:n&&n.length>0&&n.map((function(e){return Object(x.jsxs)(ae.a,{children:[Object(x.jsx)(ae.a.Img,{variant:"top",src:e.picUrl}),Object(x.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(ae.a.Title,{children:e.name}),Object(x.jsx)(ae.a.Text,{children:e.description})]}),Object(x.jsx)("div",{style:{marginLeft:"auto"},children:Object(x.jsx)(Y.a,{variant:"primary",as:j.b,to:{pathname:"/config/advanced/".concat(e.id)},children:"\u4fee\u6539"})})]})]},e.id)}))})}var Ae=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u83dc\u55ae\u8a2d\u5b9a"}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(Ie,{}),Object(x.jsx)("br",{}),Object(x.jsx)(Ce,{})]})]})}}]),n}(a.a.Component);function Ee(e){var t=Object(c.useState)(""),n=Object(E.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(E.a)(s,2),j=i[0],h=i[1],u=Object(c.useState)(""),b=Object(E.a)(u,2),p=b[0],O=b[1],m=Object(d.f)(),f=(new k.a).getAll(),v=f.storeId,g=Object(c.useState)(""),y=Object(E.a)(g,2),w=y[0],S=y[1],T=Object(c.useState)(""),N=Object(E.a)(T,2),I=N[0],C=N[1],A=Object(c.useState)(""),P=Object(E.a)(A,2),q=P[0],M=P[1];function R(){return(R=Object(l.a)(o.a.mark((function e(){var t,n,c,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("foodTitle").value,n=document.getElementById("foodSub").value,c=document.getElementById("foodPrice").value,a="https://lunchapi.hsuan.app/api/stores/"+v+"/products",r={name:t,price:c,description:n,store_id:v,image:p},e.next=7,fetch(a,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(f.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(e),m.push("/config/menu")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(l.a)(o.a.mark((function t(){var n,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://lunchapi.hsuan.app/api/stores/"+f.storeId+"/products/"+e.product,t.prev=1,t.next=4,fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(f.session),Accept:"application/json"}});case 4:return c=t.sent,t.next=7,c.json();case 7:a=t.sent,M(a.price),S(a.name),C(a.description),O(a.image),console.log(a),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),window.alert("\u932f\u8aa4!!!\nerror: ".concat(t.t0,"\n\u7acb\u5373\u8fd4\u56de\u9996\u9801\n")),document.location.href="/";case 19:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){D.apply(this,arguments)}()}),[]),Object(x.jsx)(_.a,{children:Object(x.jsxs)("form",{className:"foodBlock",onSubmit:function(e){e.preventDefault(),function(){R.apply(this,arguments)}()},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u98df\u7269\u540d"}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"\u6a19\u984c",value:w,onChange:function(e){return S(e.target.value)},required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u50f9\u9322"}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"\u50f9\u9322",value:q,onChange:function(e){return M(parseInt(e.target.value))},required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u526f\u6a19\u984c"}),Object(x.jsx)("input",{type:"text",className:"form-control",placeholder:"\u526f\u6a19",value:I,onChange:function(e){return C(e.target.value)},required:!0})]}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsx)("div",{className:"form-group",children:Object(x.jsxs)(Y.a,{as:"label",variant:"primary",hidden:""!==p,children:["\u4e0a\u50b3\u5716\u7247",Object(x.jsx)("input",{type:"file",name:"file",className:"upload-file",id:"file",onChange:function(e){console.log("Uploading");var t=f.storeId,n=new FileReader,c=e.target.files[0];n.onload=function(e){console.log(c),r(e.target.result);var n=new FormData;n.append("image",c),h(!0),fetch("https://lunchapi.hsuan.app/api/stores/"+t+"/images",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(f.session)},body:n}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(typeof e),O(e.result.data),window.alert(e.result.data),h(!1)}))},n.readAsDataURL(c),console.log("Uploaded")},required:!0,hidden:!0})]})})})}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsxs)("center",{children:[Object(x.jsx)(W.a,{hidden:!1===j,animation:"border"}),Object(x.jsx)("br",{}),Object(x.jsx)("a",{href:"https://lunchapi.hsuan.app/"+p,target:"_blank",hidden:!a||j,rel:"noreferrer",children:"https://lunchapi.hsuan.app/"+p}),Object(x.jsx)("br",{}),Object(x.jsx)($.a.Image,{width:300,src:a&&!j?"https://lunchapi.hsuan.app/"+p:"https://via.placeholder.com/300x180?text=Product+Image",resizeMode:"contain"})]})})}),Object(x.jsx)(B.a,{children:Object(x.jsx)("div",{className:"h-100 align-items-center",children:Object(x.jsx)("div",{id:"placeToAdd"})})}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsx)("button",{className:"btn btn-primary btn-block",children:"\u9001\u51fa"})})})]})})}var Pe=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u9032\u968e\u8a2d\u5b9a"}),Object(x.jsx)(Ee,{product:this.props.match.params.product})]})}}]),n}(a.a.Component),_e=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"});var e=new RegExp("\n","g"),t=m.docRoot+"title.json";fetch(t).then((function(e){return e.json()})).then((function(e){document.getElementById("title").innerHTML=e.title}));var n=m.docRoot+"coc.json";fetch(n).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.title.length;++n){var c=document.createElement("H2");c.textContent=t.title[n],document.getElementById("COC").appendChild(c),document.getElementById("COC").innerHTML+="<p>"+t.context[n].replace(e,"<br>")+"</p>"}var a=document.createElement("H3");a.innerText="\u6700\u5f8c\u66f4\u65b0\u65e5\u671f\uff1a"+t.date,document.getElementById("COC").appendChild(a)}))}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u884c\u70ba\u6e96\u5247"}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{id:"title"}),Object(x.jsx)("div",{id:"COC"})]})]})}}]),n}(a.a.Component),Be=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"});var e=new RegExp("\n","g"),t=m.docRoot+"title.json";fetch(t).then((function(e){return e.json()})).then((function(e){document.getElementById("title").innerHTML=e.title}));var n=m.docRoot+"privacy.json";fetch(n).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.title.length;++n){var c=document.createElement("H2");c.textContent=t.title[n],document.getElementById("policy").appendChild(c),document.getElementById("policy").innerHTML+="<p>"+t.context[n].replace(e,"<br>")+"</p>"}var a=document.createElement("H3");a.innerText="\u6700\u5f8c\u66f4\u65b0\u65e5\u671f\uff1a"+t.date,document.getElementById("policy").appendChild(a)}))}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u96b1\u79c1\u6b0a\u8072\u660e"}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{id:"title"}),Object(x.jsx)("div",{id:"policy"})]})]})}}]),n}(a.a.Component),Fe=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={loading:!1},c}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(x.jsx)(a.a.Fragment,{children:Object(x.jsx)(_.a,{children:Object(x.jsxs)("form",{className:"signInBlock",children:[Object(x.jsx)("h3",{style:{textAlign:"center"},children:"\u5e33\u865f\u8a3b\u518a"}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u555f\u52d5\u78bc"}),Object(x.jsx)("input",{id:"activateToken",type:"text",className:"form-control",placeholder:"Enter the activate code",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u96fb\u5b50\u90f5\u4ef6"}),Object(x.jsx)("input",{id:"userInputEmail",type:"email",className:"form-control",placeholder:"Enter email",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u5bc6\u78bc"}),Object(x.jsx)("input",{id:"userInputPasswd",type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u5bc6\u78bc\u78ba\u8a8d"}),Object(x.jsx)("input",{id:"userInputPasswdVerification",type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u4f7f\u7528\u8005\u540d\u7a31"}),Object(x.jsx)("input",{id:"username",type:"text",className:"form-control",placeholder:"Enter the username",required:!0})]}),Object(x.jsxs)(B.a,{children:[Object(x.jsx)(F.a,{}),Object(x.jsx)(F.a,{}),Object(x.jsx)(F.a,{children:this.state.loading?Object(x.jsx)(j.b,{className:"btn btn-primary btn-block",type:"submit",children:"\u8acb\u7a0d\u5f8c"}):Object(x.jsx)(j.b,{className:"btn btn-primary btn-block",type:"submit",onClick:function(){var t=document.getElementById("userInputPasswd"),n=document.getElementById("userInputPasswdVerification"),c=document.getElementById("userInputEmail"),a=document.getElementById("activateToken"),r=document.getElementById("username");if(t.value&&n.value&&c.value&&a.value&&r.value){if(t.value!==n.value)return window.alert("\u5bc6\u78bc\u8207\u5bc6\u78bc\u9a57\u8b49\u4e0d\u7b26"),t.value="",void(n.value="");if(-1!==c.value.search(/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/)){var s={email:c.value,name:r.value,password:t.value,registration_code:a.value};e.setState({loading:!0}),fetch("https://lunchapi.hsuan.app/api/register",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(t){console.log(t.message);var n=JSON.parse(t.message);window.alert("".concat(n.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),e.setState({loading:!1})})).then((function(t){(new k.a).set("alert","\u8a3b\u518a\u6210\u529f",{path:"/"}),window.location.replace("/login"),e.setState({loading:!1})})).catch((function(t){console.log("Failed: ".concat(t)),e.setState({loading:!1})})).then(e.setState({loading:!1}))}}},children:"\u9001\u51fa"})})]})]})})})}}]),n}(a.a.Component),qe=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)(a.a.Fragment,{children:Object(x.jsx)(Fe,{})})}}]),n}(a.a.Component),Me=n(261),Re=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u610f\u898b\u53cd\u994b"}),Object(x.jsx)(_.a,{children:Object(x.jsxs)(Me.a,{children:[Object(x.jsxs)(Me.a.Group,{children:[Object(x.jsx)(Me.a.Label,{children:"\u66b1\u7a31\uff1a"}),Object(x.jsx)(Me.a.Control,{id:"nickName",type:"text",placeholder:"\u5c0f/\u5927\u660e",required:!0}),Object(x.jsx)(Me.a.Text,{className:"text-muted",children:"\u6211\u5011\u7d55\u5c0d\u4e0d\u6703\u56e0\u70ba\u4f60\u7684\u66b1\u7a31\u5f88\u667a\u969c\u5c31\u4e0d\u7406\u4f60"})]}),Object(x.jsxs)(Me.a.Group,{children:[Object(x.jsx)(Me.a.Label,{children:"\u554f\u984c\uff1a"}),Object(x.jsx)(Me.a.Control,{as:"textarea",rows:"5",id:"question",required:!0})]}),Object(x.jsx)(Y.a,{variant:"primary",type:"submit",onClick:function(){var e=document.getElementById("nickName"),t=document.getElementById("question");if(""!==e.value&&""!==t.value){var n=new FormData;n.append("entry.1239005013",e.value),n.append("entry.664971969",t.value);fetch("https://docs.google.com/forms/u/0/d/e/1FAIpQLSdppxPAZlPuLMgelWDJ1wP6fIB4vScvivNrn3BZ9g7etGklCA/formResponse",{method:"POST",mode:"no-cors",body:n}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){window.alert("message sent"),console.log(e)})),window.alert("\u5df2\u7d93\u6536\u5230\u4f60\u7684\u8a0a\u606f\u4e86\n\u6211\u5011\u5c07\u6703\u52aa\u529b\u6539\u9032"),(new k.a).set("alert","\u50b3\u9001\u6210\u529f",{path:"/"}),document.location.replace("#/feedback")}},children:"\u9001\u51fa"})]})})]})}}]),n}(a.a.Component),De=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"optionBar",hidden:!0,children:Object(x.jsx)("ul",{children:Object(x.jsx)("li",{children:Object(x.jsxs)(Y.a,{variant:"dark",onClick:function(){var e=m.project+"#/config/new/option";window.open(e,"","location=no,height=500,width=400,top=100,left=300").body="\u529f\u80fd\u672a\u958b\u653e"},children:[Object(x.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"}),"\u65b0\u589e\u9078\u9805"]})})})})}}]),n}(a.a.Component);function ze(){var e=Object(c.useState)(""),t=Object(E.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(E.a)(r,2),i=s[0],j=s[1],h=Object(c.useState)(""),u=Object(E.a)(h,2),b=u[0],p=u[1],O=Object(d.f)(),m=(new k.a).getAll(),f=m.storeId;function v(){return(v=Object(l.a)(o.a.mark((function e(){var t,n,c,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("foodTitle").value,n=document.getElementById("foodSub").value,c=document.getElementById("foodPrice").value,a="https://lunchapi.hsuan.app/api/stores/"+f+"/products",r={name:t,price:c,description:n,store_id:f,image:b},e.next=7,fetch(a,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(m.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(e),O.push("/config/menu")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsxs)("form",{className:"foodBlock",onSubmit:function(e){e.preventDefault(),function(){v.apply(this,arguments)}()},children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u98df\u7269\u540d"}),Object(x.jsx)("input",{id:"foodTitle",type:"text",className:"form-control",placeholder:"\u6a19\u984c",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u50f9\u9322"}),Object(x.jsx)("input",{id:"foodPrice",type:"number",className:"form-control",placeholder:"\u50f9\u9322",required:!0})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u526f\u6a19\u984c"}),Object(x.jsx)("input",{id:"foodSub",type:"text",className:"form-control",placeholder:"\u526f\u6a19",required:!0})]}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsx)("div",{className:"form-group",children:Object(x.jsxs)(Y.a,{as:"label",variant:"primary",hidden:""!==b,children:["\u4e0a\u50b3\u5716\u7247",Object(x.jsx)("input",{type:"file",name:"file",className:"upload-file",id:"file",onChange:function(e){console.log("Uploading");var t=m.storeId,n=new FileReader,c=e.target.files[0];n.onload=function(e){console.log(c),a(e.target.result);var n=new FormData;n.append("image",c),j(!0),fetch("https://lunchapi.hsuan.app/api/stores/"+t+"/images",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(m.session)},body:n}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(typeof e),p(e.result.data),j(!1)}))},n.readAsDataURL(c),console.log("Uploaded")},required:!0,hidden:!0})]})})})}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsxs)("center",{children:[Object(x.jsx)(W.a,{hidden:!1===i,animation:"border"}),Object(x.jsx)("br",{}),Object(x.jsx)("a",{href:"https://lunchapi.hsuan.app/"+b,target:"_blank",hidden:!n||i,rel:"noreferrer",children:"https://lunchapi.hsuan.app/"+b}),Object(x.jsx)("br",{}),Object(x.jsx)($.a.Image,{width:300,src:n&&!i?"https://lunchapi.hsuan.app/"+b:"https://via.placeholder.com/300x180?text=Product+Image",resizeMode:"contain"})]})})}),Object(x.jsx)(B.a,{children:Object(x.jsx)("div",{className:"h-100 align-items-center",children:Object(x.jsx)("div",{id:"placeToAdd"})})}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsx)("button",{className:"btn btn-primary btn-block",children:"\u9001\u51fa"})})})]})}var Le=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u65b0\u589e\u83dc\u55ae"}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(De,{}),Object(x.jsx)("br",{}),Object(x.jsx)(ze,{})]})]})}}]),n}(a.a.Component);var Je=function(){var e=Object(c.useState)([]),t=Object(E.a)(e,2),n=t[0],r=(t[1],Object(c.useState)([])),s=Object(E.a)(r,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){o(n)}),[n]),Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u9078\u9805\u8a2d\u5b9a"}),Object(x.jsxs)(_.a,{children:[Object(x.jsxs)("form",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{children:"\u65b0\u9078\u9805"}),Object(x.jsx)("input",{id:"inputOption",type:"text",className:"form-control",placeholder:"\u9078\u9805\u540d"})]}),Object(x.jsx)(Y.a,{className:"btn btn-primary btn-block",children:"\u65b0\u589e"})]}),Object(x.jsx)("br",{}),i.map((function(e,t){return Object(x.jsx)(ae.a,{children:Object(x.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(x.jsx)("div",{children:Object(x.jsx)(ae.a.Title,{children:e})}),Object(x.jsx)("div",{style:{marginLeft:"auto"},children:Object(x.jsx)(Y.a,{variant:"primary",onClick:function(){return e=t,void window.alert(e);var e},children:"\u522a\u9664"})})]})},e)}))]})]})},Ue=n(251),Ge=n(62),He=n(63),We=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsxs)(ae.a,{className:["m-3","p-3"],children:[Object(x.jsx)("div",{hidden:!this.props.quota.exceed_quota,children:"\u5132\u5b58\u7a7a\u9593\u5df2\u6eff"}),Object(x.jsxs)("div",{children:["\u5132\u5b58\u7a7a\u9593\u5269\u9918 ",(this.props.quota.remain/1024e3).toFixed(2)," Mb / ",this.props.quota.total," Mb (\u5df2\u7528",((this.props.quota.total-this.props.quota.remain/1024e3)/this.props.quota.total*100).toFixed(2),"%)"]})]})}}]),n}(a.a.Component),Ze=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:this.props.subscription.plan.name}),Object(x.jsx)("td",{children:this.props.subscription.plan.description}),Object(x.jsxs)("td",{children:[this.props.subscription.plan.disk_quota," Mb"]}),Object(x.jsx)("td",{children:null!==(e=this.props.subscription.expires_at)&&void 0!==e?e:"\u6c38\u4e45\u6709\u6548"})]})}}]),n}(a.a.Component),Ke=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).generateECPay=c.generateECPay.bind(Object(v.a)(c)),c}return Object(u.a)(n,[{key:"generateECPay",value:function(){return"https://lunchapi.hsuan.app/"+this.props.storeId+"/"+this.props.plan.id+"/sendOrder"}},{key:"render",value:function(){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:this.props.plan.name}),Object(x.jsx)("td",{children:this.props.plan.description}),Object(x.jsxs)("td",{children:[this.props.plan.disk_quota," Mb"]}),Object(x.jsx)("td",{children:Object(x.jsx)("a",{href:this.generateECPay(),rel:"noreferrer",className:"btn btn-primary",target:"_blank",children:"\u8cfc\u8cb7"})})]})}}]),n}(a.a.Component),Ve=new we,Qe=new oe.a,$e=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={quota:{},loading:!1,subscriptions:[],plans:[]},c}return Object(u.a)(n,[{key:"getDiskQuota",value:function(e){var t=this;this.setState({loading:!0}),Ve.call("/stores/:store/disk_quota",{method:"GET",params:{store:e}},(function(e){console.log(e.remain),t.setState({quota:e,loading:!1})}))}},{key:"getSubscriptions",value:function(e){var t=this;this.setState({loading:!0}),Ve.call("/stores/:store/subscriptions",{method:"GET",params:{store:e}},(function(e){console.log(e),t.setState({subscriptions:e,loading:!1})}))}},{key:"getPlans",value:function(e){var t=this;this.setState({loading:!0}),Ve.call("/plans",{method:"GET",params:{store:e}},(function(e){console.log(e),t.setState({plans:e,loading:!1})}))}},{key:"componentDidMount",value:function(e){var t=this;window.scrollTo({top:0,behavior:"smooth"});var n=Qe.get("storeId");n?(this.setState({storeId:n}),this.getDiskQuota(n),this.getSubscriptions(n),this.getPlans(n)):ee.a.fire({title:"\u932f\u8aa4!",text:"404 (STORE_NOT_FOUND)",icon:"error",confirmButtonText:"Ok"}).then((function(){return t.props.history.push("/settings/activate")}))}},{key:"render",value:function(){var e=this,t=this.state.subscriptions.map((function(e,t){return Object(x.jsx)(Ze,{subscription:e},e.id)})),n=this.state.plans.map((function(t,n){return Object(x.jsx)(Ke,{plan:t,storeId:e.state.storeId},t.id)}));return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsxs)("h1",{style:{textAlign:"center"},children:["\u5ba2\u670d\u4e2d\u5fc3 ",Object(x.jsx)(Ge.a,{icon:He.a})]}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsx)("center",{children:Object(x.jsx)(W.a,{animation:"border",hidden:!this.state.loading})})})}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsxs)(ae.a,{className:["m-3","p-3"],children:[Object(x.jsxs)("h5",{children:["\u60a8\u7684\u5e97\u5bb6ID\u70ba\uff1a ",Object(x.jsx)("b",{children:this.state.storeId})]}),Object(x.jsx)(We,{quota:this.state.quota}),Object(x.jsxs)(ae.a,{className:["m-3","p-3"],children:["\u60a8\u64c1\u6709\u7684\u65b9\u6848\u5217\u8868",Object(x.jsxs)(Ue.a,{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"\u65b9\u6848\u540d\u7a31"}),Object(x.jsx)("th",{children:"\u8aaa\u660e"}),Object(x.jsx)("th",{children:"\u5132\u5b58\u5bb9\u91cf"}),Object(x.jsx)("th",{children:"\u5230\u671f\u6642\u9593"})]})}),Object(x.jsx)("tbody",{children:t})]})]}),Object(x.jsxs)(ae.a,{className:["m-3","p-3"],children:["\u53ef\u8cfc\u8cb7\u7684\u65b9\u6848\u5217\u8868",Object(x.jsx)("div",{className:"alert alert-danger",children:"\u76ee\u524d\u70ba\u6e2c\u8a66\u968e\u6bb5\u8acb\u52ff\u4ed8\u6b3e"}),Object(x.jsxs)(Ue.a,{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"\u65b9\u6848\u540d\u7a31"}),Object(x.jsx)("th",{children:"\u8aaa\u660e"}),Object(x.jsx)("th",{children:"\u5132\u5b58\u5bb9\u91cf"}),Object(x.jsx)("th",{children:"\u8cfc\u8cb7"})]})}),Object(x.jsx)("tbody",{children:n})]})]})]})})})]})}}]),n}(a.a.Component),Ye=Object(d.h)($e),Xe=n(111),et=n(268),tt=n(142),nt=n(139),ct=n(252),at=n(136),rt=n(137),st=n.n(rt),it=n(138),ot=n.n(it),lt=(n(205),new we),jt=new oe.a;window.Pusher=n(206),window.Echo=new at.a({broadcaster:"pusher",wsHost:"lunchapi.hsuan.app",wsPath:"/websockets",wsPort:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_ENDPOINT:"https://lunchapi.hsuan.app/api",REACT_APP_API_HOST:"https://lunchapi.hsuan.app",REACT_APP_WS_HOST:"lunchapi.hsuan.app",REACT_APP_WS_PATH:"/websockets",REACT_APP_PUSHER_APP_KEY:"test"}).REACT_APP_WS_PORT,disableStats:!0,key:"test",forceTLS:!1,authorizer:function(e,t){return{authorize:function(t,n){st()({method:"POST",url:"https://lunchapi.hsuan.app/api/broadcasting/auth",headers:{Authorization:"Bearer ".concat(jt.get("session"))},data:{socket_id:t,channel_name:e.name}}).then((function(e){n(!1,e.data)})).catch((function(e){n(!0,e)}))}}}});var dt=function(e){Object(b.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(h.a)(this,n),(c=t.call(this,e)).state={transactions:[],rating:1},c}return Object(u.a)(n,[{key:"componentDidMount",value:function(e){var t=new ot.a;if(window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){t.start()}),5e3),jt.get("storeId")){var n=this;lt.call("/me",{method:"GET"},(function(e){window.Echo.private("user.".concat(e.id)).listen(".transaction.created",(function(e){var t,c;console.log(e),new Notification("".concat(e.transaction.id," ").concat(null===(t=e.transaction)||void 0===t||null===(c=t.product)||void 0===c?void 0:c.name)),n.setState((function(t){return{transactions:[e.transaction].concat(Object(Xe.a)(t.transactions))}}))}))}))}else;}},{key:"requestNotification",value:function(){Notification&&"granted"===Notification.permission?new Notification("\u6e2c\u8a66\u901a\u77e5"):Notification&&"denied"!==Notification.permission?Notification.requestPermission((function(e){Notification.permission!==e&&(Notification.permission=e),"granted"===e?new Notification("\u6e2c\u8a66\u901a\u77e5"):alert("\u4f60\u4e0d\u958b\u901a\u77e5\u6211\u4e5f\u4e0d\u80fd\u63d0\u9192\u4f60")})):alert("\u4f60\u4e0d\u958b\u901a\u77e5\u6211\u4e5f\u4e0d\u80fd\u63d0\u9192\u4f60")}},{key:"transactionsToast",value:function(){return this.state.transactions.map((function(e,t){var n,c,a;return Object(x.jsxs)(et.a,{children:[Object(x.jsx)(tt.a,{children:Object(x.jsxs)("strong",{className:"mr-auto",children:["(",e.id.substring(0,5),") ",null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.name]})}),Object(x.jsxs)(nt.a,{children:[null===e||void 0===e||null===(c=e.product)||void 0===c?void 0:c.name," x ",null===e||void 0===e?void 0:e.qty," ",Object(x.jsx)("br",{}),null===e||void 0===e||null===(a=e.product)||void 0===a?void 0:a.description]})]})}))}},{key:"handleRate",value:function(e){this.setState({rating:e}),lt.call("/products/:product/rate",{params:{product:""}},(function(e){console.log(e)}))}},{key:"rating",value:function(){var e=this;return Object(x.jsxs)(F.a,{children:[Object(x.jsx)(ct.a,{children:Object(Xe.a)(Array(6).keys()).slice(1).map((function(t){return t<=e.state.rating?Object(x.jsx)(Y.a,{variant:"primary",className:["text-lg"],onClick:e.handleRate.bind(e,t),"data-star":t,children:Object(x.jsx)(Ge.a,{icon:He.b})},t):Object(x.jsx)(Y.a,{variant:"secondary",className:["text-lg"],onClick:e.handleRate.bind(e,t),"data-star":t,children:Object(x.jsx)(Ge.a,{icon:He.b})},t)}))}),"\xa0",Object(x.jsx)(Y.a,{variant:"danger",className:["text-lg"],onClick:this.handleRate.bind(this,-1),children:Object(x.jsx)(Ge.a,{icon:He.c})})]})}},{key:"render",value:function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsxs)("h1",{style:{textAlign:"center"},children:["\u8a02\u55ae\u5217\u8868 ",Object(x.jsx)(Ge.a,{icon:He.b})]}),Object(x.jsx)(B.a,{children:Object(x.jsx)(F.a,{children:Object(x.jsx)("center",{children:Object(x.jsx)(W.a,{animation:"border",hidden:!this.state.loading})})})}),Object(x.jsx)(Y.a,{"data-intro":"Hello step one!",onClick:this.requestNotification,children:"\u50b3\u9001\u901a\u77e5"}),Object(x.jsx)(B.a,{children:this.rating()}),Object(x.jsxs)(B.a,{children:[Object(x.jsx)(F.a,{children:this.transactionsToast()}),Object(x.jsxs)(F.a,{children:[this.state.transactions.length,JSON.stringify(this.state.transactions)]})]})]})}}]),n}(a.a.Component);function ht(){var e=Object(c.useState)(!0),t=Object(E.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),i=Object(E.a)(s,2),d=i[0],h=i[1],u=new k.a,b=u.getAll(),p=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,c,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="https://lunchapi.hsuan.app/api/stores/"+b.storeId+"/transactions",e.next=4,fetch(t,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(b.session)}});case 4:return n=e.sent,e.next=7,n.json();case 7:for(i in c=e.sent,console.log(c),a={},console.log(c),c.map((function(e){return void 0===a[e.product_id]?a[e.product_id]=1:a[e.product_id]++,null})),s=[],a)console.log(a[i]),console.log(i),s.push({name:i,count:a[i]});h(s),r(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),u.set("alert","\u64cd\u4f5c\u932f\u8aa4\uff0c\u8acb\u91cd\u8a66",{path:"/"}),document.location.href="/";case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return p()}),[]),Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("center",{children:Object(x.jsx)(W.a,{animation:"border",hidden:!n})}),Object(x.jsx)("center",{children:Object(x.jsx)("h1",{children:"\u5df2\u8a02\u9910\u540d\u55ae"})}),Object(x.jsx)(_.a,{children:d?d.map((function(e){return Object(x.jsx)(ae.a,{children:Object(x.jsxs)(ae.a.Body,{style:{display:"flex"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(ae.a.Title,{children:e.name}),Object(x.jsxs)(ae.a.Text,{children:[e.count,"\u4efd"]})]}),Object(x.jsx)("div",{style:{marginLeft:"auto"},children:Object(x.jsx)(Y.a,{variant:"primary",as:j.b,to:{pathname:"/booked/detailed/".concat(e.name)},children:"\u7acb\u5373\u67e5\u770b"})})]})},e.id)})):Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("h2",{style:{textAlign:"center"},children:"\u67e5\u7121\u8cc7\u6599"})]})}),Object(x.jsx)("br",{})]})}function ut(e){var t=Object(c.useState)(!0),n=Object(E.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)([]),j=Object(E.a)(i,2),d=j[0],h=j[1],u=Object(c.useState)(""),b=Object(E.a)(u,2),p=b[0],O=b[1],m=new k.a,f=m.getAll(),v=function(){var t=Object(l.a)(o.a.mark((function t(){var n,c,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://lunchapi.hsuan.app/api/stores/"+f.storeId+"/transactions",t.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(f.session)}});case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,r=[],a.map((function(t){t.product_id===e.match.params.itemId&&r.push(t)})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(l.a)(o.a.mark((function t(){var n,c,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://lunchapi.hsuan.app/api/stores/"+f.storeId+"/products",t.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(f.session)}});case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,r="temp",a.map((function(t){t.id===e.match.params.itemId&&(r=t.name)})),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([v(),g(e.match.params.itemId)]);case 3:n=t.sent,s(!1),O(n[1]),h(n[0]),console.log(n[0]),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),window.alert(t.t0),m.set("alert","\u8b80\u53d6\u932f\u8aa4\uff0c\u6b63\u5728\u8fd4\u56de\u9996\u9801",{path:"/"}),document.location.href="/";case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){return y()}),[]),Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsxs)("center",{children:[Object(x.jsx)("h1",{children:"\u8a73\u7d30\u8cc7\u6599"}),Object(x.jsxs)("h2",{children:["\u5546\u54c1\u540d\u7a31\uff1a",p," ",Object(x.jsx)(W.a,{animation:"border",hidden:!r})]})]}),Object(x.jsx)(_.a,{children:d?d.map((function(e){return Object(x.jsx)(ae.a,{children:Object(x.jsx)(ae.a.Body,{style:{display:"flex"},children:Object(x.jsxs)("div",{children:[Object(x.jsxs)(ae.a.Title,{children:["\u4ea4\u6613\u7de8\u865f\uff1a",e.id]}),Object(x.jsxs)(ae.a.Text,{children:["\u5099\u8a3b\uff1a",e.comment]})]})})},e.id)})):Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("br",{}),Object(x.jsx)("h2",{style:{textAlign:"center"},children:"\u67e5\u7121\u8cc7\u6599"})]})})]})}var bt=n(253),pt=n(242),Ot=n(260),mt=n(255),xt=n(112),ft=n(254),vt=n(102),gt=new we,yt=Object(bt.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"},miniIcon:{width:60,height:60}}}));function wt(e){var t,n,c,a=yt(),r=Object(d.f)();return Object(x.jsx)("div",{className:a.root,children:Object(x.jsx)(pt.a,{className:a.paper,elevation:3,children:Object(x.jsxs)(ge.a,{container:!0,spacing:2,children:[Object(x.jsxs)(ge.a,{item:!0,xs:12,sm:!0,container:!0,children:[Object(x.jsxs)(ge.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,children:[Object(x.jsxs)(ge.a,{item:!0,xs:!0,children:[Object(x.jsxs)(Ot.a,{fontSize:1,color:vt.a,hidden:parseFloat(e.product.weight)<=1,children:[Object(x.jsx)(ft.a,{style:{fontSize:12}}),"\xa0\u5ee3\u544a"]}),Object(x.jsx)(mt.a,{style:{cursor:"pointer",color:"green"},gutterBottom:!0,variant:"h6",as:j.b,onClick:function(){return r.push("/purchase/".concat(e.product.store_id,"/").concat(e.product.id))},children:null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.name}),Object(x.jsx)(mt.a,{variant:"body2",gutterBottom:!0,children:null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n.description}),Object(x.jsx)(mt.a,{variant:"body2",color:"textSecondary",children:null===e||void 0===e||null===(c=e.product)||void 0===c?void 0:c.store_name})]}),Object(x.jsx)(ge.a,{item:!0,children:Object(x.jsx)(Ot.a,{component:"fieldset",mb:3,borderColor:"transparent",children:Object(x.jsx)(fe.a,{name:"read-only",value:parseFloat(e.product.ratings_avg),readOnly:!0})})})]}),Object(x.jsx)(ge.a,{item:!0,children:Object(x.jsxs)(mt.a,{variant:"subtitle1",children:[e.product.price,"\u5143"]})})]}),Object(x.jsx)(ge.a,{item:!0,children:Object(x.jsx)(xt.a,{className:a.image,children:Object(x.jsx)("img",{className:a.img,alt:e.product.name,src:"https://lunchapi.hsuan.app/"+e.product.image})})})]})})})}function kt(){var e=Object(c.useRef)(!0),t=Object(c.useState)(""),n=Object(E.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)([]),o=Object(E.a)(i,2),l=o[0],j=o[1],h=Object(c.useState)(!1),u=Object(E.a)(h,2),b=u[0],p=u[1],O=Object(d.g)(),m=a.a.useCallback((function(e){var t;p(!0),t="string"===typeof e?e:r,gt.call("/products/query",{method:"POST",body:{term:t}},(function(e){j(e),p(!1)}))}),[r]);Object(c.useEffect)((function(){if(e.current){e.current=!1,window.scrollTo({top:0,behavior:"smooth"});var t=new URLSearchParams(O.search).get("q");s(t),m(t)}}),[O.search,m]);var f=l.map((function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)(wt,{product:e}),Object(x.jsx)("br",{})]},e.id)}));return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)(ve.a,{hidden:!b}),Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u641c\u5c0b\u7d50\u679c"}),Object(x.jsxs)(_.a,{children:[Object(x.jsx)(S.a,{id:"filled-full-width",label:"\u641c\u5c0b\u98df\u7269",style:{margin:8},placeholder:"\u60f3\u5403\u7684\u6771\u897f",helperText:"\u60f3\u5403\u7684\u6771\u897f",fullWidth:!0,value:r,margin:"normal",InputLabelProps:{shrink:!0},onChange:function(e){s(e.target.value)},variant:"filled",InputProps:{endAdornment:Object(x.jsx)(T.a,{onClick:m,children:Object(x.jsx)(I.a,{})})}}),Object(x.jsx)("h5",{style:{textAlign:"center"},hidden:b||0!==l.length,children:"\u76ee\u524d\u7121\u76f8\u95dc\u8cc7\u6599"}),f]})]})}var St=n(141),Tt=n(262),Nt=n(256);function It(e){var t=e.children,n=e.value,c=e.index,a=Object(St.a)(e,["children","value","index"]);return Object(x.jsx)("div",Object(ye.a)(Object(ye.a)({role:"tabpanel",hidden:n!==c,id:"vertical-tabpanel-".concat(c),"aria-labelledby":"vertical-tab-".concat(c)},a),{},{children:n===c&&Object(x.jsx)(Ot.a,{p:3,children:Object(x.jsx)(mt.a,{children:t})})}))}function Ct(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var At=Object(bt.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex",height:224},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}}));function Et(){var e=At(),t=a.a.useState(0),n=Object(E.a)(t,2),c=n[0],r=n[1];return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u958b\u767c\u8005\u8a2d\u5b9a"}),Object(x.jsxs)("div",{className:e.root,children:[Object(x.jsxs)(Tt.a,{orientation:"vertical",variant:"scrollable",value:c,onChange:function(e,t){r(t)},"aria-label":"Vertical tabs example",className:e.tabs,children:[Object(x.jsx)(Nt.a,Object(ye.a)({label:"Session \u8a2d\u5b9a"},Ct(0))),Object(x.jsx)(Nt.a,Object(ye.a)({label:"Item Two"},Ct(1))),Object(x.jsx)(Nt.a,Object(ye.a)({label:"Item Three"},Ct(2))),Object(x.jsx)(Nt.a,Object(ye.a)({label:"Item Four"},Ct(3))),Object(x.jsx)(Nt.a,Object(ye.a)({label:"Item Five"},Ct(4))),Object(x.jsx)(Nt.a,Object(ye.a)({label:"Item Six"},Ct(5))),Object(x.jsx)(Nt.a,Object(ye.a)({label:"Item Seven"},Ct(6)))]}),Object(x.jsxs)(It,{value:c,index:0,children:["\u8a2d\u5b9a\u8a2d\u5b9a",Object(x.jsx)("br",{}),Object(x.jsx)(S.a,{id:"term",value:"",label:"API Token",variant:"outlined",size:"small",InputProps:{endAdornment:Object(x.jsx)(T.a,{onClick:this.searchProduct,children:Object(x.jsx)(I.a,{})})}})]}),Object(x.jsx)(It,{value:c,index:1,children:"Item Two"}),Object(x.jsx)(It,{value:c,index:2,children:"Item Three"}),Object(x.jsx)(It,{value:c,index:3,children:"Item Four"}),Object(x.jsx)(It,{value:c,index:4,children:"Item Five"}),Object(x.jsx)(It,{value:c,index:5,children:"Item Six"}),Object(x.jsx)(It,{value:c,index:6,children:"Item Seven"})]})]})}var Pt=n(140),_t=n(257),Bt=new we,Ft=[{min:0,max:100,name:"\u4e00\u822c\u6703\u54e1",color:"#eddcad"},{min:101,max:249,name:"\u7da0\u661f\u6703\u54e1",color:"#44f2a4"},{min:250,max:599,name:"\u7da0\u947d\u6703\u54e1",color:"#b1f0d4"},{min:600,max:1e3,name:"\u85cd\u661f\u6703\u54e1",color:"#4a98ff"},{min:1001,max:1999,name:"\u85cd\u947d\u6703\u54e1",color:"#aec4e6"},{min:2e3,max:3449,name:"\u9280\u661f\u6703\u54e1",color:"#d9d9d9"},{min:3500,max:9999,name:"\u91d1\u661f\u6703\u54e1",color:"#ece00a"}];function qt(){var e=Object(c.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(0),i=Object(E.a)(s,2),j=i[0],d=i[1],h=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,Bt.call("/user/level",{},(function(e){return d(e.level)}));case 3:r(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function u(e){return Object(x.jsxs)(Ot.a,{position:"relative",display:"inline-flex",children:[Object(x.jsx)(_t.a,{variant:"determinate",style:{color:e.color},value:(e.credit-e.levelMin)/(e.levelMax-e.levelMin)*100,size:e.size||"8rem"}),Object(x.jsxs)(Ot.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[Object(x.jsx)(mt.a,{variant:"caption",component:"div",color:"textPrimary",children:"".concat(e.levelName)}),Object(x.jsx)(mt.a,{variant:"caption",component:"div",color:"textSecondary",children:"".concat(Math.round(e.credit),"/").concat(Math.round(e.levelMax))})]})]})}return Object(c.useEffect)((function(){h()}),[]),Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)(ve.a,{hidden:!n}),Object(x.jsx)("h1",{style:{textAlign:"center"},children:"\u500b\u4eba\u6a94\u6848"}),Object(x.jsx)(ge.a,{container:!0,xs:12,children:Object(x.jsx)(ge.a,{item:!0,xs:12,children:Object(x.jsx)(pt.a,{elevation:3,className:["m-3","p-3"],children:function(e){var t;return Ft.every((function(n,c){return!(n.min<=e&&e<=n.max)||(t=Object(x.jsx)(u,{credit:e,levelMin:n.min,levelMax:n.max,levelName:n.name,color:n.color}),!1)})),t}(j)})})})]})}var Mt=new we;var Rt=function(){var e=Object(c.useRef)(!0);return Object(c.useEffect)((function(){if(e.current){var t=Pt.a();Object(l.a)(o.a.mark((function e(){var n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,e.next=5,n.get();case 5:c=e.sent,a=c.visitorId,Mt.call("/log",{method:"POST",body:{fingerprint:a}});case 8:case"end":return e.stop()}}),e)})))(),e.current=!1}})),Object(x.jsxs)(j.a,{children:[Object(x.jsx)(f,{}),Object(x.jsx)(A,{}),Object(x.jsx)(P,{}),Object(x.jsxs)(d.c,{children:[Object(x.jsx)(d.a,{path:"/login",component:Q}),Object(x.jsx)(d.a,{path:"/booked/detailed/:itemId",component:ut}),Object(x.jsx)(d.a,{path:"/booked",component:ht}),Object(x.jsx)(d.a,{path:"/query",component:kt}),Object(x.jsx)(d.a,{path:"/profile",component:qt}),Object(x.jsx)(d.a,{path:"/restaurant",component:xe}),Object(x.jsx)(d.a,{path:"/settings",component:Oe}),Object(x.jsx)(d.a,{path:"/purchase/:store/:product",component:ce}),Object(x.jsx)(d.a,{path:"/order/:storeId",component:se}),Object(x.jsx)(d.a,{path:"/history",component:Te}),Object(x.jsx)(d.a,{path:"/service",component:Ye}),Object(x.jsx)(d.a,{path:"/sells/test",component:dt}),Object(x.jsx)(d.a,{path:"/config/new/option",component:Je}),Object(x.jsx)(d.a,{path:"/config/store",component:Ne}),Object(x.jsx)(d.a,{path:"/config/menu/new",component:Le}),Object(x.jsx)(d.a,{path:"/config/menu",component:Ae}),Object(x.jsx)(d.a,{path:"/config/advanced/:product",component:Pe}),Object(x.jsx)(d.a,{path:"/privacy",component:Be}),Object(x.jsx)(d.a,{path:"/COC",component:_e}),Object(x.jsx)(d.a,{path:"/signup",component:qe}),Object(x.jsx)(d.a,{path:"/feedback",component:Re}),Object(x.jsx)(d.a,{path:"/dev",component:Et}),Object(x.jsx)(d.a,{path:"/",component:H})]}),Object(x.jsx)(q,{})]})},Dt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,272)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(Rt,{})}),document.getElementById("root")),Dt()},33:function(e){e.exports=JSON.parse('{"baseURL":"https://lunchapi.hsuan.app/api/","project":"https://tnfsa.github.io","gmailSuffix":"gm.tnfsh.tn.edu.tw","docRoot":"https://lunchdoc.tnfsa.org/","googleCloudPlatformId":"1081268402297-stef8id8lhkhjd7lvh1de82eubmcn3re","version":"0.3.0 Alpha \u5167\u6e2c\u7248"}')}},[[207,1,2]]]);
//# sourceMappingURL=main.fdb281f1.chunk.js.map