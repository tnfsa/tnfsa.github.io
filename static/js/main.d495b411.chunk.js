/*! For license information please see main.d495b411.chunk.js.LICENSE.txt */
(this["webpackJsonplunch-wpa"]=this["webpackJsonplunch-wpa"]||[]).push([[0],{11:function(e){e.exports=JSON.parse('{"baseURL":"https://lunchapi.hsuan.app/api/","project":"https://tnfsa.github.io","gmailSuffix":"gm.tnfsh.tn.edu.tw","docRoot":"https://tnfsa.github.io/document/","googleCloudPlatformId":"1081268402297-stef8id8lhkhjd7lvh1de82eubmcn3re","version":"0.3.0 \u6e2c\u8a66\u7248"}')},116:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(24),o=n.n(r),s=(n(116),n(117),n(13)),i=n(19),l=n(7),j=n(8),d=n(10),h=n(9),u=n(95),b=n(11),p=n(1),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e={url:b.docRoot+"status.json"};return Object(p.jsx)(u.Offline,{polling:e,children:Object(p.jsx)("p",{style:{textAlign:"center"},className:"p-3 mb-2 bg-danger text-white",children:"\u96e2\u7dda\u4e2d\uff0c\u8acb\u6aa2\u5bdf\u60a8\u7684\u9023\u7dda\u72c0\u6cc1"})})}}]),n}(a.a.Component),m=n(186),f=n(187),x=n(182),g=n(14),v=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;Object(l.a)(this,n),c=t.call(this,e);var a=(new g.a).getAll(),r=[];return a.isGoogle?r.push(!0):r.push(!1),a.isSells?r.push(!0):r.push(!1),a.session?r.push(!0):r.push(!1),c.state={isGoogle:r[0],isSells:r[1],isLoggedIn:r[2],username:a.userName||"Anonymous"},c}return Object(j.a)(n,[{key:"render",value:function(){var e="\u55e8! "+this.state.username;return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsxs)(m.a,{bg:"light",expand:"lg",children:[Object(p.jsx)(m.a.Brand,{href:"/",children:"\u7f8e\u5ee3\u8a02\u9910\u7cfb\u7d71"}),Object(p.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsxs)(m.a.Collapse,{id:"basic-navbar-nav",children:[Object(p.jsxs)(f.a,{className:"mr-auto",children:[Object(p.jsx)(f.a.Link,{href:"#/restaurant",children:"\u9910\u5ef3"}),this.state.isSells&&Object(p.jsxs)(x.a,{title:"\u5e97\u5bb6\u7ba1\u7406",id:"basic-nav-dropdown",children:[Object(p.jsx)(x.a.Item,{href:"#/config/store",children:"\u5546\u5bb6\u8a2d\u5b9a"}),Object(p.jsx)(x.a.Item,{href:"#/config/menu",children:"\u83dc\u55ae\u8a2d\u5b9a"}),Object(p.jsx)(x.a.Item,{as:s.b,to:"/service",children:"\u5ba2\u670d\u670d\u52d9"})]}),Object(p.jsxs)(x.a,{title:"\u76f8\u95dc\u9023\u7d50",id:"basic-nav-dropdown",children:[Object(p.jsx)(x.a.Item,{href:"https://sites.google.com/view/tnfshsu/",rel:"noreferrer noopener",target:"_blank",children:"\u5b78\u806f\u6703"}),Object(p.jsx)(x.a.Item,{href:"https://tnfsacec.github.io",rel:"noreferrer noopener",target:"_blank",children:"\u9078\u59d4\u6703"})]})]}),this.state.isLoggedIn?Object(p.jsxs)(x.a,{title:e,id:"basic-nav-dropdown",children:[Object(p.jsx)(x.a.Item,{href:"#/history",children:"\u6b77\u53f2\u7d00\u9304"}),Object(p.jsx)(x.a.Item,{href:"#/settings",children:"\u8a2d\u5b9a"}),Object(p.jsx)(x.a.Item,{onClick:function(){var e=new g.a;e.remove("id"),e.remove("isGoogle"),e.remove("isSells"),e.remove("session"),e.remove("userName"),e.remove("storeId"),e.remove("name"),e.set("alert","\u767b\u51fa\u6210\u529f",{path:"/"}),window.location.replace("/")},children:"\u767b\u51fa"})]}):Object(p.jsxs)(f.a,{children:[Object(p.jsx)(f.a.Link,{href:"#/signup",children:"\u8a3b\u518a"}),Object(p.jsx)(f.a.Link,{href:"#/login",children:"\u767b\u5165"})]})]})]})})}}]),n}(a.a.Component),y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;Object(l.a)(this,n),c=t.call(this,e);var a=[],r=(new g.a).getAll();return r.alert?a.push(!0):a.push(!1),c.state={alert:a[0],alertSentence:r.alert},c}return Object(j.a)(n,[{key:"componentDidMount",value:function(){(new g.a).remove("alert")}},{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:this.state.alert&&Object(p.jsx)("p",{className:"p-3 mb-2 bg-success text-white",children:this.state.alertSentence})})}}]),n}(a.a.Component),w=n(177),k=n(178),N=n(99),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"p-3 mb-2 bg-dark text-white ",children:Object(p.jsxs)(w.a,{children:[Object(p.jsx)("br",{}),Object(p.jsxs)(k.a,{children:[Object(p.jsxs)(N.a,{children:[Object(p.jsx)(s.b,{to:"/privacy",children:"\u96b1\u79c1\u6b0a\u8072\u660e"}),Object(p.jsx)("br",{}),Object(p.jsx)(s.b,{to:"/COC",children:"\u884c\u70ba\u6e96\u5247"}),Object(p.jsx)("br",{}),Object(p.jsx)(s.b,{to:"/feedback",children:"\u610f\u898b\u53cd\u994b"})]}),Object(p.jsxs)(N.a,{children:["\u95dc\u65bc\u6211\u5011\uff1a",Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:"https://sivir.pw",rel:"noreferrer noopener",target:"_blank",children:"Milliax"}),"\u3001",Object(p.jsx)("a",{href:"https://hsuan.app/",rel:"noreferrer noopener",target:"_blank",children:"Hsuan1117"}),"\u3001",Object(p.jsx)("a",{href:"https://neodoggy.github.io/",rel:"noreferrer noopener",target:"_blank",children:"Neodoggy"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsxs)("span",{children:["version: ",b.version]})]})]})]})})]})}}]),n}(a.a.Component),T=n(46),C=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(T.a,{children:[Object(p.jsxs)(T.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"First slide"}),Object(p.jsxs)(T.a.Caption,{children:[Object(p.jsx)("h3",{children:"First slide label"}),Object(p.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]}),Object(p.jsxs)(T.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"Second slide"}),Object(p.jsxs)(T.a.Caption,{children:[Object(p.jsx)("h3",{children:"Second slide label"}),Object(p.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]}),Object(p.jsxs)(T.a.Item,{children:[Object(p.jsx)("img",{className:"d-block w-100",src:"https://media.wired.com/photos/598e35fb99d76447c4eb1f28/master/pass/phonepicutres-TA.jpg",alt:"Third slide"}),Object(p.jsxs)(T.a.Caption,{children:[Object(p.jsx)("h3",{children:"Third slide label"}),Object(p.jsx)("p",{children:"\u5c0d\u4e0d\u8d77\u6211\u76dc\u5716"})]})]})]})}}]),n}(a.a.Component),I=n(23),E=n.n(I),A=n(36),B=n(15),L=n(184),F=n(185),U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):R(t,e)}))}}function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function M(){var e=Object(c.useState)(!1),t=Object(B.a)(e,2),n=t[0],a=t[1];function r(){return o.apply(this,arguments)}function o(){return(o=Object(A.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({});case 2:a(!1),window.location.reload(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){P({onUpdate:function(e){window.alert("\u767c\u73fe\u65b0\u7248\u672c\uff01\uff01\uff01 \u9ede\u6b64\u7acb\u5373\u66f4\u65b0"),e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}})}),[]),Object(p.jsx)(L.a,{open:n,message:"A new version is available!",onClick:r,anchorOrigin:{vertical:"top",horizontal:"center"},action:Object(p.jsx)(F.a,{color:"inherit",size:"small",onClick:r,children:"Reload"})})}var _=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsxs)(w.a,{children:[Object(p.jsx)(M,{}),Object(p.jsx)(C,{})]})})}}]),n}(a.a.Component),D=n(180),q=n(103),J=n.n(q),z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=b.googleCloudPlatformId+".apps.googleusercontent.com",t=function(e){console.log(JSON.stringify(e));var t={token:e.accessToken},n=b.baseURL+"google";fetch(n,{method:"POST",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(t){var n;if(void 0!==e.profileObj.givenName){var c=new g.a;c.set("session",t.access_token,{path:"/"}),c.set("isGoogle","true",{path:"/"}),c.set("alert","\u767b\u5165\u6210\u529f",{path:"/"}),c.set("userName",null===e||void 0===e||null===(n=e.profileObj)||void 0===n?void 0:n.givenName,{path:"/"}),window.location.replace("/")}})).catch((function(e){console.log("Failed: ".concat(e))}))};return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(J.a,{clientId:e,buttonText:"\u4f7f\u7528 Google \u767b\u5165",onSuccess:t,onFailure:t,hostedDomain:b.gmailSuffix,cookiePolicy:"single_host_origin"})})}}]),n}(a.a.Component),G=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={loading:!1},c}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){var e=this;return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)(w.a,{children:Object(p.jsxs)("form",{className:"signInBlock",children:[Object(p.jsx)("h3",{style:{textAlign:"center"},className:"p-2",children:"\u767b\u5165"}),Object(p.jsx)("center",{hidden:!this.state.loading,children:Object(p.jsx)(D.a,{animation:"border"})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u96fb\u5b50\u90f5\u4ef6"}),Object(p.jsx)("input",{id:"userInputEmail",type:"email",className:"form-control",placeholder:"Enter email"})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u5bc6\u78bc"}),Object(p.jsx)("input",{id:"userInputPasswd",type:"password",className:"form-control",placeholder:"Enter password"})]}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(N.a,{}),Object(p.jsx)(N.a,{}),Object(p.jsx)(N.a,{children:Object(p.jsx)(s.b,{className:"btn btn-primary btn-block",onClick:function(){var t=document.getElementById("userInputEmail"),n=document.getElementById("userInputPasswd");if(-1!==t.value.search(/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/)){var c={email:t.value,password:n.value},a=b.baseURL+"login";e.setState({loading:!0}),fetch(a,{method:"POST",body:JSON.stringify(c),headers:new Headers({"Content-Type":"application/json",Accept:"application/json"})}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){var t=new g.a;return t.set("session",e.access_token,{path:"/"}),t.set("alert","\u767b\u5165\u6210\u529f",{path:"/"}),e})).catch((function(e){console.log("Failed: ".concat(e))})).then((function(t){var n=b.baseURL+"me";fetch(n,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t.access_token)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(t){var n=new g.a;n.set("userName",t.name,{path:"/"}),n.set("id",t.id,{path:"/"}),n.set("isSells",!0,{path:"/"}),void 0!==t.stores[0]&&n.set("storeId",t.stores[0].id,{path:"/"}),e.setState({loading:!1}),document.location.replace("/")}))}))}},children:"Submit"})})]}),Object(p.jsx)("hr",{}),Object(p.jsx)("label",{children:"\u5176\u4ed6\u767b\u5165\u65b9\u5f0f\uff1f"}),Object(p.jsx)("div",{className:"otherLoginMethod",children:Object(p.jsx)(z,{})})]})})})}}]),n}(a.a.Component),H=n(188),W=n(98),Z=n(32),Q=n.n(Z),V=n(190);function $(e){var t=Object(c.useState)(""),n=Object(B.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)(""),l=Object(B.a)(s,2),j=l[0],d=l[1],h=Object(c.useState)(""),u=Object(B.a)(h,2),O=u[0],m=u[1],f=Object(c.useState)(""),x=Object(B.a)(f,2),v=x[0],y=x[1],S=Object(c.useState)(""),T=Object(B.a)(S,2),C=T[0],I=T[1],L=Object(i.f)(),F=b.baseURL+"stores/"+e.store+"/products/"+e.product;function U(){return(U=Object(A.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(F,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){m(e.price),y(e.description),o(e.name),d(e.image)})).catch((function(e){var t=JSON.parse(e.message);Q.a.fire({title:"\u932f\u8aa4!",text:"".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"),icon:"error",confirmButtonText:"Ok"}).then((function(){return L.push("/")}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=(new g.a).getAll();return Object(c.useEffect)((function(){!function(){U.apply(this,arguments)}()})),Object(p.jsx)(a.a.Fragment,{children:Object(p.jsxs)(w.a,{children:[Object(p.jsx)("br",{}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(N.a,{children:Object(p.jsxs)(H.a,{children:[Object(p.jsx)(H.a.Caption,{className:"text-center",children:r}),Object(p.jsx)(H.a.Image,{width:300,alt:"\u9910\u9ede\u7684\u7167\u7247",src:b.baseURL.replace(/\/api/,"")+j,resizeMode:"contain"})]})}),Object(p.jsx)(N.a,{children:v})]}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{children:Object(p.jsxs)("h5",{children:["\u5efa\u8b70\u552e\u50f9\uff1a",O]})})}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(N.a,{lg:9,children:Object(p.jsx)(V.a,{className:"form-control",placeholder:"\u7559\u8a00",rows:"5",onChange:function(e){return I(e.target.value)},value:C})}),Object(p.jsx)(N.a,{lg:3,children:Object(p.jsx)("div",{style:{display:"flex"},children:Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(W.a,{variant:"primary",onClick:function(){var t="\u8acb\u78ba\u8a8d\u60a8\u7684\u8a02\u8cfc\u8cc7\u8a0a\n\u540d\u7a31\uff1a".concat(r,"\n\u552e\u50f9\uff1a").concat(O,"\n\u5176\u4ed6\u5efa\u8b70\uff1a(\u529f\u80fd\u672a\u958b\u653e)\n\u6309 OK \u9001\u51fa\uff1bcancel \u53d6\u6d88");if(window.confirm(t)){var n=b.baseURL+"transactions";fetch(n,{method:"POST",body:JSON.stringify({name:r,qty:1,store_id:e.store,product_id:e.product,comment:C,options:{}}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(P.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(e){Q.a.fire({title:"\u8a02\u8cfc\u6210\u529f!",html:"\u611f\u8b1d\u60a8\u5229\u7528\u672c\u7cfb\u7d71\u8a02\u8cfc\u7522\u54c1<br>\u8acb\u8a18\u5f97\u65bc\u9078\u53d6\u6642\u9593\u53d6\u9910\uff0c\u8b1d\u8b1d<br>"+"\u60a8\u7684\u4ea4\u6613ID\u70ba\uff1a <b>".concat(e.id,"</b>"),icon:"success",confirmButtonText:"Ok"}).then((function(){return L.push("/")}))})).catch((function(e){console.log(e);var t=JSON.parse(e.message);Q.a.fire({title:"\u932f\u8aa4!",text:"".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"),icon:"error",confirmButtonText:"Ok"}).then((function(){return L.push("/")}))}))}else Q.a.fire({title:"\u932f\u8aa4!",text:"\u8a02\u55ae\u672a\u6210\u7acb",icon:"error",confirmButtonText:"Ok"}).then()},children:"\u8a02\u8cfc"})})})})]})]})})}var K=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u8a02\u9910"}),Object(p.jsx)($,{store:this.props.match.params.store,product:this.props.match.params.product})]})}}]),n}(a.a.Component),X=n(189);var Y=function(e){var t=Object(c.useState)([]),n=Object(B.a)(t,2),r=n[0],o=n[1],l=Object(i.f)();function j(){return(j=Object(A.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=b.baseURL+"stores/"+e.storeId+"/products",fetch(n,{method:"GET"}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),l.push("/login")})).then((function(t){console.log(t);for(var n=0;n<t.length;++n)t[n].storeId=e.storeId;o(t)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){j.apply(this,arguments)}()})),Object(p.jsx)("div",{className:"ListStore",children:r&&(r.length>0?r.map((function(e){return Object(p.jsxs)(X.a,{children:[Object(p.jsx)(X.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(X.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(X.a.Title,{children:e.name}),Object(p.jsx)(X.a.Text,{children:e.description})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(W.a,{variant:"primary",as:s.b,to:{pathname:"/purchase/".concat(e.storeId,"/").concat(e.id)},children:"\u7acb\u5373\u524d\u5f80"})})]})]})})):Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("h2",{style:{textAlign:"center"},children:"\u67e5\u7121\u8cc7\u6599"})]}))})},ee=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u5403\u4ec0\u9ebc"}),Object(p.jsx)(Y,{id:this.props.match.params.storeId})]})}}]),n}(a.a.Component),te=n(50),ne=n.n(te);function ce(e,t){console.log("[".concat(e.toUpperCase(),"] ").concat(t,'"'))}var ae=new ne.a,re=[{name:"\u555f\u52d5\u5546\u5e97\u529f\u80fd",url:"/settings/activate"},{name:"\u8b8a\u66f4\u5546\u5e97\u540d",url:"/settings/change_name"},{name:"\u8b8a\u66f4\u5bc6\u78bc",url:"/settings/change_password"}],oe={change_name:{title:"\u8b8a\u66f4\u5546\u5e97\u540d",hint:"\u8acb\u8f38\u5165\u5546\u5e97\u540d",placeholder:"\u65b0\u5546\u5e97\u540d",submitUri:b.baseURL+"stores",method:"PUT",afterFetch:function(e){ce("debug",e.id),ae.set("storeId",e.id)}},change_password:{title:"\u8b8a\u66f4\u5bc6\u78bc",hint:"\u8acb\u8f38\u5165\u65b0\u5bc6\u78bc",placeholder:"\u65b0\u5bc6\u78bc",submitUri:b.baseURL+"change_password",method:"POST",return:["newpassword"]},activate:{title:"\u555f\u52d5\u5546\u5e97\u529f\u80fd",hint:"\u8acb\u8f38\u5165\u5546\u5e97\u540d",placeholder:"\u5546\u5e97\u540d",submitUri:b.baseURL+"stores",method:"POST",return:["name"],afterFetch:function(e){ce("debug",e.id),ae.set("storeId",e.id)}}};var se=function(){return re.map((function(e){return Object(p.jsx)(X.a,{children:Object(p.jsx)(X.a.Body,{style:{display:"flex"},children:Object(p.jsx)("div",{children:Object(p.jsx)(s.b,{to:e.url,children:e.name})})})})}))},ie=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=document.location.href.split("/")[5];return Object(p.jsxs)(a.a.Fragment,{children:[oe[t]&&Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h2",{children:oe[t].title}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:oe[t].hint}),Object(p.jsx)("input",{id:"userInput",type:"text",className:"form-control",placeholder:oe[t].placeholder})]}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:function(){var n=(new g.a).getAll();n.session||(window.alert("Session expired"),document.location.replace("/"));var c={method:oe[t].method,headers:{Accept:"application/json",Authorization:"Bearer ".concat(n.session),"Content-Type":"application/json"}};if("POST"===oe[t].method){for(var a={},r=0;r<oe[t].return.length;++r){var o=document.getElementById("userInput");a[oe[t].return[r]]=o.value}c.body=JSON.stringify(a)}fetch(oe[t].submitUri,c).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).then((function(n){var c;console.log(n),Q.a.fire({title:"\u6210\u529f!",text:"\u66f4\u65b0\u6210\u529f, \u6b61\u8fce".concat(null!==(c=null===n||void 0===n?void 0:n.name)&&void 0!==c?c:"","!"),icon:"success",confirmButtonText:"Ok"}).then((function(){var c,a;null===(c=oe[t])||void 0===c||null===(a=c.afterFetch)||void 0===a||a.call(c,n),e.props.history.go(0)}))})).catch((function(e){var t,n=JSON.parse(e.message).error;Q.a.fire({title:"\u932f\u8aa4!",html:"\u932f\u8aa4\uff1a ".concat(null!==(t=null===n||void 0===n?void 0:n.localizedMessage)&&void 0!==t?t:"","! <br>\n                        \u932f\u8aa4\u4ee3\u78bc\uff1a ").concat(null===n||void 0===n?void 0:n.code,"(").concat(null===n||void 0===n?void 0:n.status,")<br>\n                        \u5982\u554f\u984c\u6301\u7e8c\u767c\u751f\uff0c\u8acb\u63d0\u4f9b\u9019\u4e9b\u8cc7\u8a0a\u7d66\u5de5\u7a0b\u5e2b!\n                        "),icon:"error",confirmButtonText:"Ok"})}))},children:"\u78ba\u8a8d"})]}),!oe[t]&&t&&Object(p.jsx)("h2",{children:"\u8acb\u8f38\u5165\u5408\u6cd5\u529f\u80fd"}),!oe[t]&&!t&&Object(p.jsx)("h2",{children:"\u8acb\u9078\u53d6\u5de6\u908a\u529f\u80fd\u4ee5\u7e7c\u7e8c"})]})}}]),n}(a.a.Component),le=Object(i.g)(ie),je=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u8a2d\u5b9a"}),Object(p.jsx)(w.a,{children:Object(p.jsxs)(k.a,{children:[Object(p.jsx)(N.a,{xs:3,children:Object(p.jsx)(se,{})}),Object(p.jsx)(N.a,{xs:7,children:Object(p.jsx)(le,{})})]})})]})}}]),n}(a.a.Component);var de=function(){var e=Object(c.useState)([]),t=Object(B.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!0),i=Object(B.a)(o,2),l=i[0],j=i[1];return Object(c.useEffect)((function(){!function(){var e=b.baseURL+"stores";console.log(e),fetch(e,{method:"GET"}).then((function(e){return j(!1),e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("/")})).then((function(e){console.log(e),r(e)}))}()}),[]),Object(p.jsxs)("div",{className:"ListStore",children:[n&&(n.length>0?n.map((function(e){return Object(p.jsxs)(X.a,{children:[Object(p.jsx)(X.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(X.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(X.a.Title,{children:e.name}),Object(p.jsx)(X.a.Text,{children:e.description})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(W.a,{variant:"primary",as:s.b,to:{pathname:"/order/".concat(e.id)},children:"\u7acb\u5373\u67e5\u770b"})})]})]})})):Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("h2",{style:{textAlign:"center"},children:"\u76ee\u524d\u7121\u76f8\u95dc\u8cc7\u6599"})]})),Object(p.jsx)("center",{children:Object(p.jsx)(D.a,{animation:"border",hidden:!l})})]})},he=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u9910\u5ef3"}),Object(p.jsx)(w.a,{children:Object(p.jsx)(de,{})})]})}}]),n}(a.a.Component);function ue(){var e=Object(c.useState)([]),t=Object(B.a)(e,2),n=t[0],a=t[1];function r(){return(r=Object(A.a)(E.a.mark((function e(){var t,n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new g.a,n=t.getAll(),c=b.baseURL+"transactions",fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(n.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("/")})).then((function(e){console.log(e),a(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){r.apply(this,arguments)}()}),[]),Object(p.jsx)(w.a,{children:Object(p.jsx)("div",{className:"History",children:n&&n.length>0&&n.map((function(e){return Object(p.jsxs)(X.a,{children:[Object(p.jsx)(X.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(X.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(X.a.Title,{children:e.product_id}),Object(p.jsx)(X.a.Text,{children:e.comment})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(W.a,{variant:"primary",as:s.b,to:{pathname:"/order/".concat(e.id)},children:"\u67e5\u770b"})})]})]})}))})})}var be=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u6b77\u53f2\u7d00\u9304"}),Object(p.jsx)(ue,{})]})}}]),n}(a.a.Component),pe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u5546\u5bb6\u8a2d\u5b9a"})})}}]),n}(a.a.Component),Oe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"optionBar",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)(s.b,{to:"/config/menu/new",children:"\u65b0\u589e"})})})})}}]),n}(a.a.Component);function me(){var e=Object(c.useState)([]),t=Object(B.a)(e,2),n=t[0],a=t[1],r=(new g.a).getAll();r.storeId||Q.a.fire({title:"\u932f\u8aa4!",text:"404 (STORE_NOT_FOUND)",icon:"error",confirmButtonText:"Ok"});return Object(c.useEffect)((function(){!function(){var e=b.baseURL+"stores/"+r.storeId+"/products";fetch(e,{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),window.location.replace("#/login")})).then((function(e){console.log(e),a(e)}))}()})),Object(p.jsx)("div",{className:"storeAdded",children:n&&n.length>0&&n.map((function(e){return Object(p.jsxs)(X.a,{children:[Object(p.jsx)(X.a.Img,{variant:"top",src:e.picUrl}),Object(p.jsxs)(X.a.Body,{style:{display:"flex"},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(X.a.Title,{children:e.name}),Object(p.jsx)(X.a.Text,{children:e.description})]}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(W.a,{variant:"primary",as:s.b,to:{pathname:"/order/".concat(e.id)},children:"\u4fee\u6539"})})]})]})}))})}var fe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u83dc\u55ae\u8a2d\u5b9a"}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)(Oe,{}),Object(p.jsx)("br",{}),Object(p.jsx)(me,{})]})]})}}]),n}(a.a.Component),xe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u9032\u968e\u8a2d\u5b9a"})})}}]),n}(a.a.Component),ge=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"});var e=new RegExp("\n","g"),t=b.docRoot+"title.json";fetch(t).then((function(e){return e.json()})).then((function(e){document.getElementById("title").innerHTML=e.title}));var n=b.docRoot+"coc.json";fetch(n).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.title.length;++n){var c=document.createElement("H2");c.textContent=t.title[n],document.getElementById("COC").appendChild(c),document.getElementById("COC").innerHTML+="<p>"+t.context[n].replace(e,"<br>")+"</p>"}var a=document.createElement("H3");a.innerText="\u6700\u5f8c\u66f4\u65b0\u65e5\u671f\uff1a"+t.date,document.getElementById("COC").appendChild(a)}))}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u884c\u70ba\u6e96\u5247"}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("p",{id:"title"}),Object(p.jsx)("div",{id:"COC"})]})]})}}]),n}(a.a.Component),ve=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"});var e=new RegExp("\n","g"),t=b.docRoot+"title.json";fetch(t).then((function(e){return e.json()})).then((function(e){document.getElementById("title").innerHTML=e.title}));var n=b.docRoot+"privacy.json";fetch(n).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.title.length;++n){var c=document.createElement("H2");c.textContent=t.title[n],document.getElementById("policy").appendChild(c),document.getElementById("policy").innerHTML+="<p>"+t.context[n].replace(e,"<br>")+"</p>"}var a=document.createElement("H3");a.innerText="\u6700\u5f8c\u66f4\u65b0\u65e5\u671f\uff1a"+t.date,document.getElementById("policy").appendChild(a)}))}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u96b1\u79c1\u6b0a\u8072\u660e"}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)("br",{}),Object(p.jsx)("p",{id:"title"}),Object(p.jsx)("div",{id:"policy"})]})]})}}]),n}(a.a.Component),ye=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={loading:!1},c}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)(w.a,{children:Object(p.jsxs)("form",{className:"signInBlock",children:[Object(p.jsx)("h3",{style:{textAlign:"center"},children:"\u5e33\u865f\u8a3b\u518a"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u555f\u52d5\u78bc"}),Object(p.jsx)("input",{id:"activateToken",type:"text",className:"form-control",placeholder:"Enter the activate code",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u96fb\u5b50\u90f5\u4ef6"}),Object(p.jsx)("input",{id:"userInputEmail",type:"email",className:"form-control",placeholder:"Enter email",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u5bc6\u78bc"}),Object(p.jsx)("input",{id:"userInputPasswd",type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u5bc6\u78bc\u78ba\u8a8d"}),Object(p.jsx)("input",{id:"userInputPasswdVerification",type:"password",className:"form-control",placeholder:"Enter password",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u4f7f\u7528\u8005\u540d\u7a31"}),Object(p.jsx)("input",{id:"username",type:"text",className:"form-control",placeholder:"Enter the username",required:!0})]}),Object(p.jsxs)(k.a,{children:[Object(p.jsx)(N.a,{}),Object(p.jsx)(N.a,{}),Object(p.jsx)(N.a,{children:this.state.loading?Object(p.jsx)(s.b,{className:"btn btn-primary btn-block",type:"submit",children:"\u8acb\u7a0d\u5f8c"}):Object(p.jsx)(s.b,{className:"btn btn-primary btn-block",type:"submit",onClick:function(){var t=document.getElementById("userInputPasswd"),n=document.getElementById("userInputPasswdVerification"),c=document.getElementById("userInputEmail"),a=document.getElementById("activateToken"),r=document.getElementById("username");if(t.value&&n.value&&c.value&&a.value&&r.value){if(t.value!==n.value)return window.alert("\u5bc6\u78bc\u8207\u5bc6\u78bc\u9a57\u8b49\u4e0d\u7b26"),t.value="",void(n.value="");if(-1!==c.value.search(/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/)){var o={email:c.value,name:r.value,password:t.value,registration_code:a.value},s=b.baseURL+"register";e.setState({loading:!0}),fetch(s,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(t){console.log(t.message);var n=JSON.parse(t.message);window.alert("".concat(n.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1")),e.setState({loading:!1})})).then((function(t){(new g.a).set("alert","\u8a3b\u518a\u6210\u529f",{path:"/"}),window.location.replace("/login"),e.setState({loading:!1})})).catch((function(t){console.log("Failed: ".concat(t)),e.setState({loading:!1})})).then(e.setState({loading:!1}))}}},children:"\u9001\u51fa"})})]})]})})})}}]),n}(a.a.Component),we=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsx)(a.a.Fragment,{children:Object(p.jsx)(ye,{})})}}]),n}(a.a.Component),ke=n(183),Ne=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u610f\u898b\u53cd\u994b"}),Object(p.jsx)(w.a,{children:Object(p.jsxs)(ke.a,{children:[Object(p.jsxs)(ke.a.Group,{children:[Object(p.jsx)(ke.a.Label,{children:"\u66b1\u7a31\uff1a"}),Object(p.jsx)(ke.a.Control,{id:"nickName",type:"text",placeholder:"\u5c0f/\u5927\u660e",required:!0}),Object(p.jsx)(ke.a.Text,{className:"text-muted",children:"\u6211\u5011\u7d55\u5c0d\u4e0d\u6703\u56e0\u70ba\u4f60\u7684\u66b1\u7a31\u5f88\u667a\u969c\u5c31\u4e0d\u7406\u4f60"})]}),Object(p.jsxs)(ke.a.Group,{children:[Object(p.jsx)(ke.a.Label,{children:"\u554f\u984c\uff1a"}),Object(p.jsx)(ke.a.Control,{as:"textarea",rows:"5",id:"question",required:!0})]}),Object(p.jsx)(W.a,{variant:"primary",type:"submit",onClick:function(){var e=document.getElementById("nickName"),t=document.getElementById("question");if(""!==e.value&&""!==t.value){var n=new FormData;n.append("entry.1239005013",e.value),n.append("entry.664971969",t.value);fetch("https://docs.google.com/forms/u/0/d/e/1FAIpQLSdppxPAZlPuLMgelWDJ1wP6fIB4vScvivNrn3BZ9g7etGklCA/formResponse",{method:"POST",mode:"no-cors",body:n}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){window.alert("message sent"),console.log(e)})),window.alert("\u5df2\u7d93\u6536\u5230\u4f60\u7684\u8a0a\u606f\u4e86\n\u6211\u5011\u5c07\u6703\u52aa\u529b\u6539\u9032"),(new g.a).set("alert","\u50b3\u9001\u6210\u529f",{path:"/"}),document.location.replace("#/feedback")}},children:"\u9001\u51fa"})]})})]})}}]),n}(a.a.Component),Se=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{className:"optionBar",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsxs)(W.a,{variant:"dark",onClick:function(){var e=b.project+"#/config/new/option";window.open(e,"","location=no,height=500,width=400,top=100,left=300").body="\u529f\u80fd\u672a\u958b\u653e"},children:[Object(p.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"}),"\u65b0\u589e\u9078\u9805"]})})})})}}]),n}(a.a.Component);function Te(){var e=Object(c.useState)(""),t=Object(B.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),o=Object(B.a)(r,2),s=o[0],l=o[1],j=Object(c.useState)(""),d=Object(B.a)(j,2),h=d[0],u=d[1],O=Object(i.f)(),m=(new g.a).getAll(),f=m.storeId;function x(){return(x=Object(A.a)(E.a.mark((function e(){var t,n,c,a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("foodTitle").value,n=document.getElementById("foodSub").value,c=document.getElementById("foodPrice").value,a=b.baseURL+"stores/"+f+"/products",r={name:t,price:c,description:n,store_id:f,image:h},e.next=7,fetch(a,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(m.session)}}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(e),O.push("/config/menu")}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)("form",{className:"foodBlock",onSubmit:function(e){e.preventDefault(),function(){x.apply(this,arguments)}()},children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u98df\u7269\u540d"}),Object(p.jsx)("input",{id:"foodTitle",type:"text",className:"form-control",placeholder:"\u6a19\u984c",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u50f9\u9322"}),Object(p.jsx)("input",{id:"foodPrice",type:"number",className:"form-control",placeholder:"\u50f9\u9322",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u526f\u6a19\u984c"}),Object(p.jsx)("input",{id:"foodSub",type:"text",className:"form-control",placeholder:"\u526f\u6a19(\u9078\u586b)"})]}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{children:Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)(W.a,{as:"label",variant:"primary",hidden:""!==h,children:["\u4e0a\u50b3\u5716\u7247",Object(p.jsx)("input",{type:"file",name:"file",className:"upload-file",id:"file",onChange:function(e){console.log("Uploading");var t=m.storeId,n=new FileReader,c=e.target.files[0];n.onload=function(e){console.log(c),a(e.target.result);var n=new FormData;n.append("image",c),l(!0),fetch(b.baseURL+"stores/"+t+"/images",{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(m.session)},body:n}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw new Error(e)}))})).catch((function(e){console.log(e.message);var t=JSON.parse(e.message);window.alert("".concat(t.message,"\n\u8207\u4f3a\u670d\u5668\u9023\u7dda\u932f\u8aa4\uff0c\u8acb\u518d\u8a66\u4e00\u6b21\n\u5982\u679c\u554f\u984c\u7121\u6cd5\u89e3\u6c7a\uff0c\u8acb\u806f\u7d61\u7ba1\u7406\u54e1"))})).then((function(e){console.log(typeof e),u(e.result.data),l(!1)}))},n.readAsDataURL(c),console.log("Uploaded")},required:!0,hidden:!0})]})})})}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{children:Object(p.jsxs)("center",{children:[Object(p.jsx)(D.a,{hidden:!1===s,animation:"border"}),Object(p.jsx)("br",{}),Object(p.jsx)("a",{href:b.baseURL.replace(/\/api/,"")+h,target:"_blank",hidden:!n||s,rel:"noreferrer",children:b.baseURL.replace(/\/api/,"")+h}),Object(p.jsx)("br",{}),Object(p.jsx)(H.a.Image,{width:300,src:n&&!s?b.baseURL.replace(/\/api/,"")+h:"https://via.placeholder.com/300x180?text=Product+Image",resizeMode:"contain"})]})})}),Object(p.jsx)(k.a,{children:Object(p.jsx)("div",{className:"h-100 align-items-center",children:Object(p.jsx)("div",{id:"placeToAdd"})})}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{children:Object(p.jsx)("button",{className:"btn btn-primary btn-block",children:"\u9001\u51fa"})})})]})}var Ce=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u65b0\u589e\u83dc\u55ae"}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)(Se,{}),Object(p.jsx)("br",{}),Object(p.jsx)(Te,{})]})]})}}]),n}(a.a.Component);var Ie=function(){var e=Object(c.useState)([]),t=Object(B.a)(e,2),n=t[0],r=(t[1],Object(c.useState)([])),o=Object(B.a)(r,2),s=o[0],i=o[1];return Object(c.useEffect)((function(){i(n)}),[n]),Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("h1",{style:{textAlign:"center"},children:"\u9078\u9805\u8a2d\u5b9a"}),Object(p.jsxs)(w.a,{children:[Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{children:"\u65b0\u9078\u9805"}),Object(p.jsx)("input",{id:"inputOption",type:"text",className:"form-control",placeholder:"\u9078\u9805\u540d"})]}),Object(p.jsx)(W.a,{className:"btn btn-primary btn-block",children:"\u65b0\u589e"})]}),Object(p.jsx)("br",{}),s.map((function(e,t){return Object(p.jsx)(X.a,{children:Object(p.jsxs)(X.a.Body,{style:{display:"flex"},children:[Object(p.jsx)("div",{children:Object(p.jsx)(X.a.Title,{children:e})}),Object(p.jsx)("div",{style:{marginLeft:"auto"},children:Object(p.jsx)(W.a,{variant:"primary",onClick:function(){return e=t,void window.alert(e);var e},children:"\u522a\u9664"})})]})},e)}))]})]})},Ee=n(181),Ae=n(72),Be=n(73),Le=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(p.jsxs)(X.a,{className:["m-3","p-3"],children:[Object(p.jsx)("div",{hidden:!this.props.quota.exceed_quota,children:"\u5132\u5b58\u7a7a\u9593\u5df2\u6eff"}),Object(p.jsxs)("div",{children:["\u5132\u5b58\u7a7a\u9593\u5269\u9918 ",(this.props.quota.remain/1024e3).toFixed(2)," Mb / ",this.props.quota.total," Mb (\u5df2\u7528",((this.props.quota.total-this.props.quota.remain/1024e3)/this.props.quota.total*100).toFixed(2),"%)"]})]})}}]),n}(a.a.Component),Fe=n(106),Ue=function(){function e(){Object(l.a)(this,e),this.cookies=new g.a}return Object(j.a)(e,[{key:"call",value:function(e,t,n){for(var c in e=b.baseURL.slice(0,-1)+e,t.params||{})e=e.replaceAll(":"+c,t.params[c]);var a="object"===typeof t.body?JSON.stringify(t.body):null,r=new Headers(Object(Fe.a)({"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.cookies.get("session"))},t.headers));fetch(e,{method:t.method,body:a,headers:r}).then((function(e){return e.json()})).then(n)}}]),e}(),Pe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:this.props.subscription.plan.name}),Object(p.jsx)("td",{children:this.props.subscription.plan.description}),Object(p.jsxs)("td",{children:[this.props.subscription.plan.disk_quota," Mb"]}),Object(p.jsx)("td",{children:null!==(e=this.props.subscription.expires_at)&&void 0!==e?e:"\u6c38\u4e45\u6709\u6548"})]})}}]),n}(a.a.Component),Re=n(62),Me=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).generateECPay=c.generateECPay.bind(Object(Re.a)(c)),c}return Object(j.a)(n,[{key:"generateECPay",value:function(){return b.baseURL.replace("api/","")+this.props.storeId+"/"+this.props.plan.id+"/sendOrder"}},{key:"render",value:function(){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:this.props.plan.name}),Object(p.jsx)("td",{children:this.props.plan.description}),Object(p.jsxs)("td",{children:[this.props.plan.disk_quota," Mb"]}),Object(p.jsx)("td",{children:Object(p.jsx)("a",{href:this.generateECPay(),rel:"noreferrer",className:"btn btn-primary",target:"_blank",children:"\u8cfc\u8cb7"})})]})}}]),n}(a.a.Component),_e=new Ue,De=new ne.a,qe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={quota:{},loading:!1,subscriptions:[],plans:[]},c}return Object(j.a)(n,[{key:"getDiskQuota",value:function(e){var t=this;this.setState({loading:!0}),_e.call("/stores/:store/disk_quota",{method:"GET",params:{store:e}},(function(e){console.log(e.remain),t.setState({quota:e,loading:!1})}))}},{key:"getSubscriptions",value:function(e){var t=this;this.setState({loading:!0}),_e.call("/stores/:store/subscriptions",{method:"GET",params:{store:e}},(function(e){console.log(e),t.setState({subscriptions:e,loading:!1})}))}},{key:"getPlans",value:function(e){var t=this;this.setState({loading:!0}),_e.call("/plans",{method:"GET",params:{store:e}},(function(e){console.log(e),t.setState({plans:e,loading:!1})}))}},{key:"componentDidMount",value:function(e){var t=this;window.scrollTo({top:0,behavior:"smooth"});var n=De.get("storeId");n?(this.setState({storeId:n}),this.getDiskQuota(n),this.getSubscriptions(n),this.getPlans(n)):Q.a.fire({title:"\u932f\u8aa4!",text:"404 (STORE_NOT_FOUND)",icon:"error",confirmButtonText:"Ok"}).then((function(){return t.props.history.push("/settings/activate")}))}},{key:"render",value:function(){var e=this,t=this.state.subscriptions.map((function(e,t){return Object(p.jsx)(Pe,{subscription:e},e.id)})),n=this.state.plans.map((function(t,n){return Object(p.jsx)(Me,{plan:t,storeId:e.state.storeId},t.id)}));return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsxs)("h1",{style:{textAlign:"center"},children:["\u5ba2\u670d\u4e2d\u5fc3 ",Object(p.jsx)(Ae.a,{icon:Be.a})]}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{children:Object(p.jsx)("center",{children:Object(p.jsx)(D.a,{animation:"border",hidden:!this.state.loading})})})}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{children:Object(p.jsxs)(X.a,{className:["m-3","p-3"],children:[Object(p.jsxs)("h5",{children:["\u60a8\u7684\u5e97\u5bb6ID\u70ba\uff1a ",Object(p.jsx)("b",{children:this.state.storeId})]}),Object(p.jsx)(Le,{quota:this.state.quota}),Object(p.jsxs)(X.a,{className:["m-3","p-3"],children:["\u60a8\u64c1\u6709\u7684\u65b9\u6848\u5217\u8868",Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u65b9\u6848\u540d\u7a31"}),Object(p.jsx)("th",{children:"\u8aaa\u660e"}),Object(p.jsx)("th",{children:"\u5132\u5b58\u5bb9\u91cf"}),Object(p.jsx)("th",{children:"\u5230\u671f\u6642\u9593"})]})}),Object(p.jsx)("tbody",{children:t})]})]}),Object(p.jsxs)(X.a,{className:["m-3","p-3"],children:["\u53ef\u8cfc\u8cb7\u7684\u65b9\u6848\u5217\u8868",Object(p.jsx)("div",{className:"alert alert-danger",children:"\u76ee\u524d\u70ba\u6e2c\u8a66\u968e\u6bb5\u8acb\u52ff\u4ed8\u6b3e"}),Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u65b9\u6848\u540d\u7a31"}),Object(p.jsx)("th",{children:"\u8aaa\u660e"}),Object(p.jsx)("th",{children:"\u5132\u5b58\u5bb9\u91cf"}),Object(p.jsx)("th",{children:"\u8cfc\u8cb7"})]})}),Object(p.jsx)("tbody",{children:n})]})]})]})})})]})}}]),n}(a.a.Component),Je=Object(i.g)(qe),ze=n(104),Ge=n(105),He=n.n(Ge),We=new ne.a;window.Pusher=n(157),window.Echo=new ze.a({broadcaster:"pusher",wsHost:window.location.hostname,wsPort:6001,disableStats:!0,key:"test",forceTLS:!1,authorizer:function(e,t){return{authorize:function(t,n){He()({method:"POST",url:"http://local.sivir.pw:8000/api/broadcasting/auth",headers:{Authorization:"Bearer ".concat("2|7U1wAV74Ov2hglgCZ4lYbMnETGvWrg5qlxeX6tel")},data:{socket_id:t,channel_name:e.name}}).then((function(e){n(!1,e.data)})).catch((function(e){n(!0,e)}))}}}}),window.Echo.private("App.Models.User.".concat("a017a273-16d4-4cfb-80b3-cb03e94e4cb9")).notification((function(e){console.log(e.type)}));var Ze=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={},c}return Object(j.a)(n,[{key:"componentDidMount",value:function(e){window.scrollTo({top:0,behavior:"smooth"});We.get("storeId")}},{key:"render",value:function(){return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsxs)("h1",{style:{textAlign:"center"},children:["\u8a02\u55ae\u5217\u8868 ",Object(p.jsx)(Ae.a,{icon:Be.a})]}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{children:Object(p.jsx)("center",{children:Object(p.jsx)(D.a,{animation:"border",hidden:!this.state.loading})})})}),Object(p.jsx)(k.a,{children:Object(p.jsx)(N.a,{})})]})}}]),n}(a.a.Component);var Qe=function(){return Object(p.jsxs)(s.a,{children:[Object(p.jsx)(O,{}),Object(p.jsx)(v,{}),Object(p.jsx)(y,{}),Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/login",component:G}),Object(p.jsx)(i.a,{path:"/restaurant",component:he}),Object(p.jsx)(i.a,{path:"/settings",component:je}),Object(p.jsx)(i.a,{path:"/purchase/:store/:product",component:K}),Object(p.jsx)(i.a,{path:"/order/:storeId",component:ee}),Object(p.jsx)(i.a,{path:"/history",component:be}),Object(p.jsx)(i.a,{path:"/service",component:Je}),Object(p.jsx)(i.a,{path:"/sells/test",component:Ze}),Object(p.jsx)(i.a,{path:"/config/new/option",component:Ie}),Object(p.jsx)(i.a,{path:"/config/store",component:pe}),Object(p.jsx)(i.a,{path:"/config/menu/new",component:Ce}),Object(p.jsx)(i.a,{path:"/config/menu",component:fe}),Object(p.jsx)(i.a,{path:"/config/advanced/:id",component:xe}),Object(p.jsx)(i.a,{path:"/privacy",component:ve}),Object(p.jsx)(i.a,{path:"/COC",component:ge}),Object(p.jsx)(i.a,{path:"/signup",component:we}),Object(p.jsx)(i.a,{path:"/feedback",component:Ne}),Object(p.jsx)(i.a,{path:"/",component:_})]}),Object(p.jsx)(S,{})]})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(Qe,{})}),document.getElementById("root")),Ve()}},[[158,1,2]]]);
//# sourceMappingURL=main.d495b411.chunk.js.map